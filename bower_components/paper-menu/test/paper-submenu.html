<!DOCTYPE html><html><head>

    <title>paper-submenu tests</title>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,user-scalable=yes">

    <script src="../../webcomponentsjs/webcomponents-lite.js"></script>

    <script src="../../web-component-tester/browser.js"></script>
    <script src="../../iron-test-helpers/mock-interactions.js"></script>

    <link rel="import" href="../../paper-item/paper-item.html">
    <link rel="import" href="../paper-menu.html">
    <link rel="import" href="../paper-submenu.html">

  <style>paper-item{font-weight:normal;}</style></head>
  
  <body>

    <test-fixture id="basic">
      <template>
        <paper-menu>
          <paper-submenu>
            <paper-item class="menu-trigger">Topic 1</paper-item>
            <paper-menu class="menu-content">
              <paper-item>item 1.1</paper-item>
              <paper-item>item 1.2</paper-item>
              <paper-item>item 1.3</paper-item>
            </paper-menu>
          </paper-submenu>
          <paper-submenu>
            <paper-item class="menu-trigger">Topic 2</paper-item>
            <paper-menu class="menu-content">
              <paper-item>item 2.1</paper-item>
              <paper-item>item 2.2</paper-item>
              <paper-item>item 2.3</paper-item>
            </paper-menu>
          </paper-submenu>
          <paper-submenu disabled="">
            <paper-item class="menu-trigger">Topic 3</paper-item>
            <paper-menu class="menu-content">
              <paper-item>item 3.1</paper-item>
              <paper-item>item 3.2</paper-item>
              <paper-item>item 3.3</paper-item>
            </paper-menu>
          </paper-submenu>
        </paper-menu>
      </template>
    </test-fixture>

    <script>suite("<paper-submenu>",function(){var e,t,o,s,n,a,r,l,u,i;setup(function(){e=fixture("basic"),t=e.querySelectorAll("paper-submenu")[0],o=e.querySelectorAll("paper-submenu")[1],s=e.querySelectorAll("paper-submenu")[2],n=Polymer.dom(t.root).querySelector("iron-collapse"),a=Polymer.dom(o.root).querySelector("iron-collapse"),r=Polymer.dom(s.root).querySelector("iron-collapse"),l=t.querySelector(".menu-trigger"),u=o.querySelector(".menu-trigger"),i=s.querySelector(".menu-trigger")}),test("selecting an item expands the submenu",function(){assert.isFalse(n.opened),assert.isFalse(a.opened),assert.isFalse(r.opened),MockInteractions.tap(l),assert.isTrue(n.opened),assert.isFalse(a.opened),assert.isFalse(r.opened)}),test("selecting a different item closes the previously opened submenu",function(){assert.isFalse(n.opened),assert.isFalse(a.opened),assert.isFalse(r.opened),MockInteractions.tap(l),assert.isTrue(n.opened),assert.isFalse(a.opened),assert.isFalse(r.opened),MockInteractions.tap(u),assert.isFalse(n.opened),assert.isTrue(a.opened),assert.isFalse(r.opened)}),test("cannot open a disabled submenu",function(){assert.isFalse(n.opened),assert.isFalse(a.opened),assert.isFalse(r.opened),MockInteractions.tap(i),assert.isFalse(n.opened),assert.isFalse(a.opened),assert.isFalse(r.opened)}),test("selecting an item styles it and the parent",function(){var e=document.createElement("div");e.style.fontWeight="bold",document.body.appendChild(e);var o=document.createElement("div");o.style.fontWeight="normal",document.body.appendChild(o),assert.equal(getComputedStyle(l).fontWeight,getComputedStyle(o).fontWeight),assert.equal(getComputedStyle(u).fontWeight,getComputedStyle(o).fontWeight),assert.equal(getComputedStyle(i).fontWeight,getComputedStyle(o).fontWeight);var s=t.querySelector(".menu-content").querySelector("paper-item");MockInteractions.tap(l),assert.equal(getComputedStyle(s).fontWeight,getComputedStyle(o).fontWeight),MockInteractions.tap(s),assert.equal(getComputedStyle(s).fontWeight,getComputedStyle(e).fontWeight),assert.equal(getComputedStyle(l).fontWeight,getComputedStyle(e).fontWeight),assert.equal(getComputedStyle(u).fontWeight,getComputedStyle(o).fontWeight),assert.equal(getComputedStyle(i).fontWeight,getComputedStyle(o).fontWeight)}),test("selecting a new item de-styles the previous one",function(){var e=document.createElement("div");e.style.fontWeight="bold",document.body.appendChild(e);var s=document.createElement("div");s.style.fontWeight="normal",document.body.appendChild(s),assert.equal(getComputedStyle(l).fontWeight,getComputedStyle(s).fontWeight),assert.equal(getComputedStyle(u).fontWeight,getComputedStyle(s).fontWeight),assert.equal(getComputedStyle(i).fontWeight,getComputedStyle(s).fontWeight);var n=t.querySelector(".menu-content").querySelector("paper-item"),a=o.querySelector(".menu-content").querySelector("paper-item");MockInteractions.tap(l),MockInteractions.tap(n),MockInteractions.tap(u),MockInteractions.tap(a),assert.equal(getComputedStyle(n).fontWeight,getComputedStyle(e).fontWeight),assert.equal(getComputedStyle(a).fontWeight,getComputedStyle(e).fontWeight),assert.equal(getComputedStyle(l).fontWeight,getComputedStyle(s).fontWeight),assert.equal(getComputedStyle(u).fontWeight,getComputedStyle(e).fontWeight),assert.equal(getComputedStyle(i).fontWeight,getComputedStyle(s).fontWeight)}),test("focus a submenu should redirect focus to the trigger",function(e){MockInteractions.focus(t),flush(function(){assert.equal(t.shadowRoot?t.shadowRoot.activeElement:document.activeElement,t.__trigger),e()})})});</script>

  

</body></html>