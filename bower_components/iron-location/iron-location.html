<html><head><link rel="import" href="../polymer/polymer.html">


<script>"use strict";Polymer({is:"iron-location",properties:{path:{type:String,notify:!0,value:function(){return window.location.pathname}},query:{type:String,notify:!0,value:function(){return window.location.search.slice(1)}},hash:{type:String,notify:!0,value:function(){return window.location.hash.slice(1)}},dwellTime:{type:Number,value:2e3},urlSpaceRegex:{type:String,value:""},_urlSpaceRegExp:{computed:"_makeRegExp(urlSpaceRegex)"},_lastChangedAt:{type:Number},_initialized:{type:Boolean,value:!1}},hostAttributes:{hidden:!0},observers:["_updateUrl(path, query, hash)"],attached:function(){this.listen(window,"hashchange","_hashChanged"),this.listen(window,"location-changed","_urlChanged"),this.listen(window,"popstate","_urlChanged"),this.listen(document.body,"click","_globalOnClick"),this._lastChangedAt=window.performance.now()-(this.dwellTime-200),this._initialized=!0,this._urlChanged()},detached:function(){this.unlisten(window,"hashchange","_hashChanged"),this.unlisten(window,"location-changed","_urlChanged"),this.unlisten(window,"popstate","_urlChanged"),this.unlisten(document.body,"click","_globalOnClick"),this._initialized=!1},_hashChanged:function(){this.hash=window.location.hash.substring(1)},_urlChanged:function(){this._dontUpdateUrl=!0,this._hashChanged(),this.path=window.location.pathname,this.query=window.location.search.substring(1),this._dontUpdateUrl=!1,this._updateUrl()},_getUrl:function(){var t=this.path,n=this.query;return n&&(t+="?"+n),this.hash&&(t+="#"+this.hash),t},_updateUrl:function(){if(!this._dontUpdateUrl&&this._initialized){var t=this._getUrl(),n=window.location.pathname+window.location.search+window.location.hash;if(t!=n){var i=new URL(t,window.location.protocol+"//"+window.location.host).href,e=window.performance.now(),o=this._lastChangedAt+this.dwellTime>e;this._lastChangedAt=e,o?window.history.replaceState({},"",i):window.history.pushState({},"",i),this.fire("location-changed",{},{node:window})}}},_globalOnClick:function(t){if(!t.defaultPrevented){var n=this._getSameOriginLinkHref(t);n&&(t.preventDefault(),n!==window.location.href&&(window.history.pushState({},"",n),this.fire("location-changed",{},{node:window})))}},_getSameOriginLinkHref:function(t){if(0!==t.button)return null;if(t.metaKey||t.ctrlKey)return null;for(var n=Polymer.dom(t).path,i=null,e=0;e<n.length;e++){var o=n[e];if("A"===o.tagName&&o.href){i=o;break}}if(!i)return null;if("_blank"===i.target)return null;if(("_top"===i.target||"_parent"===i.target)&&window.top!==window)return null;var a,h=i.href;a=null!=document.baseURI?new URL(h,document.baseURI):new URL(h);var r;if(window.location.origin?r=window.location.origin:(r=window.location.protocol+"//"+window.location.hostname,window.location.port&&(r+=":"+window.location.port)),a.origin!==r)return null;var l=a.pathname+a.search+a.hash;if(this._urlSpaceRegExp&&!this._urlSpaceRegExp.test(l))return null;var s=new URL(l,window.location.href).href;return s},_makeRegExp:function(t){return RegExp(t)}});</script>
</head><body></body></html>