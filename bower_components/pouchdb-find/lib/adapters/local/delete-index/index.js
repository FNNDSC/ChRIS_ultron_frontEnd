"use strict";function deleteIndex(e,t){function r(e){return 1===Object.keys(e.views).length&&e.views[u]?{_id:n,_deleted:!0}:(delete e.views[u],e)}if(!t.ddoc)throw new Error("you must supply an index.ddoc when deleting");if(!t.name)throw new Error("you must supply an index.name when deleting");var n=t.ddoc,u=t.name;return upsert(e,n,r).then(function(){return abstractMapper.viewCleanup.apply(e)}).then(function(){return{ok:!0}})}var abstractMapper=require("../abstract-mapper"),upsert=require("../../../abstract-mapreduce/upsert");module.exports=deleteIndex;