<html><head><link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-meta/iron-meta.html">



<script>Polymer({is:"iron-iconset",properties:{src:{type:String,observer:"_srcChanged"},name:{type:String,observer:"_nameChanged"},width:{type:Number,value:0},icons:{type:String},size:{type:Number,value:24},_offsetX:{type:Number,value:0},_offsetY:{type:Number,value:0},iconNames:{type:Array,notify:!0}},hostAttributes:{style:"display: none;"},ready:function(){this._themes=this._mapThemes()},applyIcon:function(t,e,o,i){this._validateIconMap();var n=this._getThemedOffset(e,o);t&&n&&this._addIconStyles(t,this._srcUrl,n,i||1,this.size,this.width)},removeIcon:function(t){this._removeIconStyles(t.style)},_mapThemes:function(){var t=Object.create(null);return Polymer.dom(this).querySelectorAll("property[theme]").forEach(function(e){var o=window.parseInt(e.getAttribute("offset-x"),10)||0,i=window.parseInt(e.getAttribute("offset-y"),10)||0;t[e.getAttribute("theme")]={offsetX:o,offsetY:i}}),t},_srcChanged:function(t){this._srcUrl=this.ownerDocument!==document?this.resolveUrl(t):t,this._prepareIconset()},_nameChanged:function(t){this._prepareIconset()},_prepareIconset:function(){new Polymer.IronMeta({type:"iconset",key:this.name,value:this}),this.async(function(){this.fire("iron-iconset-added",this,{node:window})})},_invalidateIconMap:function(){this._iconMapValid=!1},_validateIconMap:function(){this._iconMapValid||(this._recomputeIconMap(),this._iconMapValid=!0)},_recomputeIconMap:function(){this.iconNames=this._computeIconNames(this.icons),this.iconMap=this._computeIconMap(this._offsetX,this._offsetY,this.size,this.width,this.iconNames)},_computeIconNames:function(t){return t.split(/\s+/g)},_computeIconMap:function(t,e,o,i,n){var s={};if(void 0!==t&&void 0!==e){var r=t;n.forEach(function(n){s[n]={offsetX:t,offsetY:e},i>t+o?t+=o:(t=r,e+=o)},this)}return s},_getThemedOffset:function(t,e){var o=this._getIconOffset(t),i=this._themes[e];return o&&i?{offsetX:o.offsetX+i.offsetX,offsetY:o.offsetY+i.offsetY}:o},_getIconOffset:function(t){return this.iconMap[t]||this.iconMap[this.iconNames[Number(t)]]},_addIconStyles:function(t,e,o,i,n,s){var r=t.style;r.backgroundImage="url("+e+")",r.backgroundPosition=-o.offsetX*i+"px "+(-o.offsetY*i+"px"),r.backgroundSize=1===i?"auto":s*i+"px",r.width=n+"px",r.height=n+"px",t.setAttribute("role","img")},_removeIconStyles:function(t){t.background=""}});</script>
</head><body></body></html>