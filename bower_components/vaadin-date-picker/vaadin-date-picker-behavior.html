<html><head><link rel="import" href="../iron-form-element-behavior/iron-form-element-behavior.html">
<link rel="import" href="../iron-validatable-behavior/iron-validatable-behavior.html">
<link rel="import" href="../iron-a11y-keys-behavior/iron-a11y-keys-behavior.html">
<link rel="import" href="vaadin-date-picker-helper.html">

<script>window.vaadin=window.vaadin||{},vaadin.elements=vaadin.elements||{},vaadin.elements.datepicker=vaadin.elements.datepicker||{},vaadin.elements.datepicker.DatePickerBehaviorImpl={observers:["_selectedDateChanged(_selectedDate, i18n.formatDate)","_validateInput(_selectedDate, _minDate, _maxDate)","_focusedDateChanged(_focusedDate, i18n.formatDate)","_announceFocusedDate(_focusedDate, opened)"],properties:{_selectedDate:{type:Date},_focusedDate:Date,value:{type:String,observer:"_valueChanged"},hasValue:{type:Boolean,computed:"_hasValue(value)",reflectToAttribute:!0},initialPosition:String,label:String,opened:{type:Boolean,reflectToAttribute:!0,notify:!0},showWeekNumbers:{type:Boolean},_fullscreen:{value:!1,observer:"_fullscreenChanged"},_fullscreenMediaQuery:{value:"(max-width: 420px), (max-height: 420px)"},_touchPrevented:Array,i18n:{type:Object,value:function(){return{monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],firstDayOfWeek:0,week:"Week",calendar:"Calendar",clear:"Clear",today:"Today",cancel:"Cancel",formatDate:function(e){return e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()},parseDate:function(e){var t,n=e.split("/"),i=new Date,a=i.getMonth(),o=i.getFullYear();if(3===n.length?(o=parseInt(n[2]),2===n[2].length&&o>=0&&(o+=o<50?2e3:1900),a=parseInt(n[0])-1,t=parseInt(n[1])):2===n.length?(a=parseInt(n[0])-1,t=parseInt(n[1])):1===n.length&&(t=parseInt(n[0])),void 0!==t){var s=new Date(0,0);return s.setFullYear(o),s.setMonth(a),s.setDate(t),s}},formatTitle:function(e,t){return e+" "+t}}}},min:{type:String,observer:"_minChanged"},max:{type:String,observer:"_maxChanged"},_minDate:{type:Date,value:null},_maxDate:{type:Date,value:null},_forwardKeysToOverlay:Boolean,_cachedInputValue:String,_noInput:{type:Boolean,computed:"_isNoInput(_fullscreen, i18n, i18n.*, _ios)"},_ios:{type:Boolean,value:navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\d+)/)}},created:function(){this._boundOnScroll=this._onScroll.bind(this)},listeners:{tap:"open",touchend:"_preventDefault",keydown:"_onKeydown"},ready:function(){void 0===this.value&&(this.value="")},open:function(e){this._updateAlignmentAndPosition(),this.disabled||this.readonly||e&&!(Polymer.dom(e).path.indexOf(this.$.overlay)<0)||(this.$.dropdown.open(),this._forwardKeysToOverlay=!1)},close:function(){this.$.dropdown.close()},get inputElement(){return this._input()},_parseDate:function(e){var t=/^(\d{4}|[-+]\d{6})-(\d{2})-(\d{2})$/.exec(e);if(t){var n=new Date(0,0);return n.setFullYear(parseInt(t[1],10)),n.setMonth(parseInt(t[2],10)-1),n.setDate(parseInt(t[3],10)),n}},_isNoInput:function(){return this._fullscreen||!this.i18n.parseDate||this._ios},_formatISO:function(e){return e instanceof Date?new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().split("T")[0]:""},_selectedDateChanged:function(e,t){this.value=this._formatISO(e),this._focusedDate=e,this._cachedInputValue=this._inputValue=e?t(e):""},_focusedDateChanged:function(e,t){this._ignoreFocusedDateChange||this._noInput||!this.opened||(this._inputValue=e?t(e):"",this._input().setSelectionRange(0,this._inputValue.length))},_hasValue:function(e){return!!e},_handleDateChange:function(e,t,n){if(!t)return void(this[e]=null);var i=this._parseDate(t);return i?void(this[e]instanceof Date&&i.getFullYear()===this[e].getFullYear()&&i.getMonth()===this[e].getMonth()&&i.getDate()===this[e].getDate()||(this[e]=i)):void(this.value=n)},_valueChanged:function(e,t){this._handleDateChange("_selectedDate",e,t)},_minChanged:function(e,t){this._handleDateChange("_minDate",e,t)},_maxChanged:function(e,t){this._handleDateChange("_maxDate",e,t)},_updateAlignmentAndPosition:function(){var e=Math.max(document.documentElement.clientWidth,window.innerWidth||0);this.$.dropdown.positionTarget=this._fullscreen?document.documentElement:this;var t=Math.max(document.documentElement.clientHeight,window.innerHeight||0),n=this.getBoundingClientRect().top>t/2,i=this.getBoundingClientRect().left+this.clientWidth/2>e/2;this.$.dropdown.verticalAlign=n?"bottom":"top",this.$.dropdown.horizontalAlign=this._fullscreen?null:i?"right":"left",this._fullscreen?(this.$.dropdown.style.marginTop=0,this.$.dropdown.style.marginBottom=0):(this.$.dropdown.style.marginTop=(n?10:this.clientHeight+2)+"px",this.$.dropdown.style.marginBottom=(n?this.clientHeight:10)+"px"),this.$.dropdown.refit()},_fullscreenChanged:function(){this.$.dropdown.opened&&this._updateAlignmentAndPosition()},_onOverlayOpened:function(){this.$.overlay.initialPosition=this._selectedDate||this.$.overlay.initialPosition||this._parseDate(this.initialPosition)||new Date,this.$.overlay.scrollToDate(this.$.overlay.focusedDate||this.$.overlay.initialPosition),this._ignoreFocusedDateChange=!0,this.$.overlay.focusedDate=this.$.overlay.focusedDate||this.$.overlay.initialPosition,this._ignoreFocusedDateChange=!1,window.addEventListener("scroll",this._boundOnScroll,!0),window.addEventListener("resize",this._boundOnScroll,!0),""===document.createElement("div").style.webkitOverflowScrolling&&(this._touchPrevented=this._preventWebkitOverflowScrollingTouch(this.parentElement)),this._focus(),this.updateStyles()},_preventWebkitOverflowScrollingTouch:function(e){for(var t=[];e;){if("touch"===window.getComputedStyle(e).webkitOverflowScrolling){var n=e.style.webkitOverflowScrolling;e.style.webkitOverflowScrolling="auto",t.push({element:e,oldInlineValue:n})}e=e.parentElement}return t},_onOverlayClosed:function(){if(window.removeEventListener("scroll",this._boundOnScroll,!0),window.removeEventListener("resize",this._boundOnScroll,!0),this._touchPrevented&&(this._touchPrevented.forEach(function(e){e.element.style.webkitOverflowScrolling=e.oldInlineValue}),this._touchPrevented=[]),this.updateStyles(),this._forwardKeysToOverlay=!1,this._ignoreFocusedDateChange=!0,this.i18n.parseDate){var e=this._inputValue,t=this.i18n.parseDate(e);this._isValidDate(t)?this._selectedDate=t:(this._selectedDate=null,this._inputValue=e)}else this._focusedDate&&(this._selectedDate=this._focusedDate);this._ignoreFocusedDateChange=!1;var n=window.unwrap(this.inputElement);(this.shadowRoot&&this.shadowRoot.activeElement===n||document.activeElement===n)&&(n.selectionStart=n.selectionEnd),this.validate()},detached:function(){this._onOverlayClosed()},_onScroll:function(e){e.target!==window&&this.$.overlay.contains(e.target)||(this.$.dropdown.style.bottom="auto",this.$.dropdown.resetFit(),this._updateAlignmentAndPosition(),this.$.dropdown.fire("iron-resize"))},_preventCancelOnComponentAccess:function(e){var t=Polymer.dom(e.detail);/tap|mousedown|touchstart/.test(e.detail.type)&&t.path.indexOf(this)>-1&&e.preventDefault()},_focus:function(){this._noInput?this.$.overlay.focus():this.inputElement.focus()},_preventDefault:function(e){e.preventDefault()},_eventKey:function(e){for(var t=["down","up","enter","esc","tab"],n=0;n<t.length;n++){var i=t[n];if(Polymer.IronA11yKeysBehavior.keyboardEventMatchesKeys(e,i))return i}},_isValidDate:function(e){return e&&!isNaN(e.getTime())},_onKeydown:function(e){if(this._noInput){var t=[9];t.indexOf(e.keyCode)===-1&&e.preventDefault()}switch(this._eventKey(e)){case"down":case"up":e.preventDefault(),this._forwardKeysToOverlay||(this.opened?(this._cachedInputValue=this._inputValue,this._forwardKeysToOverlay=!0):this.open());break;case"enter":this.$.overlay.focusedDate&&(this._selectedDate=this.$.overlay.focusedDate),this.close();break;case"esc":if(this._forwardKeysToOverlay)this._inputValue=this._cachedInputValue,this._userInputValueChanged(),this._inputValue||(this.$.overlay.focusedDate=new Date);else{var n=this._selectedDate?this.i18n.formatDate(this._selectedDate):"";n!==this._inputValue?(this.open(),this.$.overlay.focusedDate=this._selectedDate||new Date):this._focusedDate=this._selectedDate,this._inputValue=n}this._forwardKeysToOverlay=!1;break;case"tab":return void this.close()}this.opened&&this._forwardKeysToOverlay&&this.$.overlay._onKeydown(e)},_validateInput:function(e,t,n){e&&(t||n)&&(this.invalid=!vaadin.elements.datepicker.DatePickerHelper._dateAllowed(e,t,n))},_userInputValueChanged:function(){var e=this.i18n.parseDate&&this.i18n.parseDate(this._inputValue);this._isValidDate(e)?(this._ignoreFocusedDateChange=!0,this._focusedDate=e,this._ignoreFocusedDateChange=!1):this._forwardKeysToOverlay=!1,this.opened||(this.open(),this.$.dropdown.async(this.$.dropdown.refit,500))},_announceFocusedDate:function(e,t){t&&this.debounce("_announceFocusedDate",function(){this.$.overlay.announceFocusedDate()},1)}},vaadin.elements.datepicker.DatePickerBehavior=[Polymer.IronFormElementBehavior,Polymer.IronValidatableBehavior,Polymer.IronA11yKeysBehavior,vaadin.elements.datepicker.DatePickerBehaviorImpl];</script>
</head><body></body></html>