<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>iron-list test</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">

  <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
  <script src="../../web-component-tester/browser.js"></script>

  <link rel="import" href="helpers.html">
  <link rel="import" href="x-list.html">
</head>
<body>

  <test-fixture id="trivialList">
    <template>
      <x-list></x-list>
    </template>
  </test-fixture>

  <script>suite("mutations to items",function(){var t,e;setup(function(){e=fixture("trivialList"),t=e.list}),test("update physical item",function(e){var s=100,i="It works!";t.items=buildDataSet(s),t.set("items.0.index",i),flush(function(){assert.equal(getFirstItemFromList(t).textContent,i),e()})}),test("update virtual item",function(e){function s(){simulateScroll({list:t,contribution:100,target:0},function(){flush(function(){assert.equal(getFirstItemFromList(t).textContent,n),e()})})}var i=100,n="It works!";t.items=buildDataSet(i),flush(function(){var e=t._physicalItems[0].offsetHeight;simulateScroll({list:t,contribution:100,target:i*e},function(){t.set("items.0.index",n),flush(s)})})}),test("push",function(e){var s=100;t.items=buildDataSet(s),s=t.items.length,t.push("items",buildItem(s)),assert.equal(t.items.length,s+1),flush(function(){var s=t._physicalItems[0].offsetHeight,i=t.offsetHeight,n=Math.floor(i/s);assert.equal(getFirstItemFromList(t).textContent,0),simulateScroll({list:t,contribution:s,target:t.items.length*s},function(){assert.equal(getFirstItemFromList(t).textContent,t.items.length-n),e()})})}),test("pop",function(e){var s=100;t.items=buildDataSet(s),flush(function(){var i=t._physicalItems[0].offsetHeight;simulateScroll({list:t,contribution:i,target:s*i},function(){var n=t.offsetHeight;Math.floor(n/i);t.pop("items"),flush(function(){assert.equal(t.items.length,s-1),assert.equal(getFirstItemFromList(t).textContent,s-3-1),e()})})})}),test("splice",function(e){var s=45,i="It works!";t.items=buildDataSet(s),t.splice("items",0,s,buildItem(i)),flush(function(){assert.equal(t.items.length,1),assert.equal(getFirstItemFromList(t).textContent,i),e()})}),test("delete item and scroll to bottom",function(){var e,s=100;for(t.items=buildDataSet(s);t.items.length>10;)e=parseInt(t.items.length*Math.random()),t.arrayDelete("items",t.items[e]),t.scrollToIndex(t.items.length-1),assert.isTrue(/^[0-9]*$/.test(getFirstItemFromList(t).textContent))})});</script>



</body></html>