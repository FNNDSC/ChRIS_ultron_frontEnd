<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>iron-list test</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">

  <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
  <script src="../../web-component-tester/browser.js"></script>
  <script src="../../iron-test-helpers/mock-interactions.js"></script>

  <link rel="import" href="helpers.html">
  <link rel="import" href="x-list.html">

</head>
<body>

  <test-fixture id="trivialList">
    <template>
      <x-list item-height="0" pre=""></x-list>
    </template>
  </test-fixture>

  <script>suite("Dynamic item size",function(){var t,e;setup(function(){e=fixture("trivialList"),t=e.list}),test("update size using item index",function(e){t.items=buildDataSet(100),flush(function(){var i=getFirstItemFromList(t),s=i.offsetHeight;t.set("items.0.index","1\n2\n3\n4"),t.updateSizeForItem(0),assert.isAbove(i.offsetHeight,3*s),t.set("items.0.index","1"),t.updateSizeForItem(0),assert.equal(i.offsetHeight,s),e()})}),test("update size using item object",function(e){t.items=buildDataSet(100),flush(function(){var i=getFirstItemFromList(t),s=i.offsetHeight;t.set("items.0.index","1\n2\n3\n4"),t.updateSizeForItem(t.items[0]),assert.isAbove(i.offsetHeight,3*s),t.set("items.0.index","1"),t.updateSizeForItem(t.items[0]),assert.equal(i.offsetHeight,s),e()})}),test("ignore items that are not rendered",function(e){t.items=buildDataSet(100),flush(function(){t.updateSizeForItem(t.items[t.items.length-1]),e()})}),test("throw if the item is invalid",function(e){t.items=buildDataSet(100),flush(function(){var i=getFirstItemFromList(t),s=(i.offsetHeight,0);try{t.updateSizeForItem(100)}catch(n){s++}try{t.updateSizeForItem({})}catch(n){s++}assert.equal(s,2),e()})})});</script>



</body></html>