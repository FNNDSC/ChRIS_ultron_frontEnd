<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>iron-list test</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">

  <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
  <script src="../../web-component-tester/browser.js"></script>
  <script src="../../iron-test-helpers/mock-interactions.js"></script>

  <link rel="import" href="helpers.html">
  <link rel="import" href="x-list.html">

</head>
<body>

  <test-fixture id="trivialList">
    <template>
      <x-list item-height="10"></x-list>
    </template>
  </test-fixture>

  <script>suite("selection",function(){var e,t;setup(function(){t=fixture("trivialList"),e=t.list}),test("single selection by item index",function(t){e.items=buildDataSet(100),flush(function(){assert.isNull(e.selectedItem),e.selectItem(0),assert.deepEqual(e.selectedItem,e.items[0]),e.deselectItem(0),assert.deepEqual(e.selectedItem,null),e.selectItem(99),assert.deepEqual(e.selectedItem,e.items[99]),t()})}),test("single selection by item object",function(t){e.items=buildDataSet(100),flush(function(){assert.isNull(e.selectedItem),e.selectItem(e.items[50]),assert.deepEqual(e.selectedItem,e.items[50]),t()})}),test("multi selection by item index",function(t){e.items=buildDataSet(100),flush(function(){e.multiSelection=!0,assert.isArray(e.selectedItems),e.selectItem(0),e.selectItem(50),e.selectItem(99),assert.equal(e.selectedItems.length,3),assert.notEqual(e.selectedItems.indexOf(e.items[0]),-1),assert.notEqual(e.selectedItems.indexOf(e.items[50]),-1),assert.notEqual(e.selectedItems.indexOf(e.items[99]),-1),assert.equal(e.selectedItems.indexOf(e.items[2]),-1),t()})}),test("multi selection by item object",function(t){e.items=buildDataSet(100),flush(function(){e.multiSelection=!0,assert.isArray(e.selectedItems),e.selectItem(e.items[0]),e.selectItem(e.items[50]),e.selectItem(e.items[99]),assert.equal(e.selectedItems.length,3),assert.notEqual(e.selectedItems.indexOf(e.items[0]),-1),assert.notEqual(e.selectedItems.indexOf(e.items[50]),-1),assert.notEqual(e.selectedItems.indexOf(e.items[99]),-1),assert.equal(e.selectedItems.indexOf(e.items[2]),-1),t()})}),test("clear selection",function(t){e.items=buildDataSet(100),flush(function(){e.multiSelection=!0,assert.isArray(e.selectedItems),e.items.forEach(function(t){e.selectItem(t)}),assert.equal(e.selectedItems.length,e.items.length),e.clearSelection(),assert.equal(e.selectedItems.length,0),t()})}),test("toggle selection by item index",function(t){e.items=buildDataSet(100),flush(function(){e.toggleSelectionForItem(0),assert.deepEqual(e.selectedItem,e.items[0]),e.toggleSelectionForItem(0),assert.isNull(e.selectedItem),t()})}),test("toggle selection by item object",function(t){e.items=buildDataSet(100),flush(function(){e.toggleSelectionForItem(e.items[0]),assert.deepEqual(e.selectedItem,e.items[0]),e.toggleSelectionForItem(e.items[0]),assert.isNull(e.selectedItem),t()})}),test("change multi property",function(t){e.items=buildDataSet(100),flush(function(){e.multiSelection=!0,assert.isArray(e.selectedItems),e.multiSelection=!1,assert.isNotArray(e.selectedItems),assert.isNull(e.selectedItems),e.multiSelection=!0,assert.isArray(e.selectedItems),t()})}),test("selectionEnabled with single selection",function(t){e.items=buildDataSet(100),flush(function(){e.selectionEnabled=!0,assert.isNull(e.selectedItem),MockInteractions.tap(e._physicalItems[0]),assert.deepEqual(e.selectedItem,e.items[0]),MockInteractions.tap(e._physicalItems[5]),MockInteractions.tap(e._physicalItems[1]),assert.deepEqual(e.selectedItem,e.items[1]),t()})}),test("selectionEnabled with multiple selection",function(t){e.items=buildDataSet(100),flush(function(){e.multiSelection=!0,MockInteractions.tap(e._physicalItems[0]),assert.equal(e.selectedItems.length,0),e.selectionEnabled=!0,MockInteractions.tap(e._physicalItems[0]),assert.notEqual(e.selectedItems.indexOf(e.items[0]),-1),MockInteractions.tap(e._physicalItems[1]),MockInteractions.tap(e._physicalItems[5]),MockInteractions.tap(e._physicalItems[10]),MockInteractions.tap(e._physicalItems[12]),e.selectItem(0),e.deselectItem(1),assert.equal(e.selectedItems.indexOf(e.items[1]),-1),assert.notEqual(e.selectedItems.indexOf(e.items[0]),-1),assert.notEqual(e.selectedItems.indexOf(e.items[5]),-1),assert.notEqual(e.selectedItems.indexOf(e.items[10]),-1),assert.notEqual(e.selectedItems.indexOf(e.items[12]),-1),e.clearSelection(),assert.equal(e.selectedItems.length,0),e.selectionEnabled=!1,MockInteractions.tap(e._physicalItems[1]),assert.equal(e.selectedItems.length,0),t()})}),test("toggle",function(t){e.items=buildDataSet(100),flush(function(){e.selectionEnabled=!0,MockInteractions.tap(e._physicalItems[0]),assert.deepEqual(e.selectedItem,e.items[0]),MockInteractions.tap(e._physicalItems[0]),assert.isNull(e.selectedItem),MockInteractions.tap(e._physicalItems[0]),e.clearSelection(),assert.isNull(e.selectedItem),t()})}),test("selectedAs",function(t){e.items=buildDataSet(100),flush(function(){e.multiSelection=!0,assert.isFalse(e._physicalItems[0]._templateInstance.selected),e.selectItem(0),assert.isTrue(e._physicalItems[0]._templateInstance.selected),e.toggleSelectionForItem(0),assert.isFalse(e._physicalItems[0]._templateInstance.selected),e.multiSelection=!1,e.selectItem(0),e.selectItem(10),assert.isFalse(e._physicalItems[0]._templateInstance.selected),assert.isTrue(e._physicalItems[10]._templateInstance.selected),t()})}),test("splice a selected item",function(t){e.items=buildDataSet(100),flush(function(){e.multiSelection=!0,e.selectItem(0),e.selectItem(1),assert.equal(e.selectedItems.length,2),e.splice("items",0,2),assert.equal(e.selectedItems.length,0),t()})})});</script>



</body></html>