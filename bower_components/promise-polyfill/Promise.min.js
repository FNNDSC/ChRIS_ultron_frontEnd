function m(t){function n(t){if("object"!=typeof this||"function"!=typeof t)throw new TypeError;this.c=this.a=null,this.b=[],r(t,e.bind(this),o.bind(this))}function i(n){var i=this;null===this.a?this.b.push(n):t(function(){var t=i.a?n.d:n.e;if("function"!=typeof t)(i.a?n.resolve:n.reject)(i.c);else{var e;try{e=t(i.c)}catch(o){return void n.reject(o)}n.resolve(e)}})}function e(t){try{if(t===this)throw new TypeError;if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void r(n.bind(t),e.bind(this),o.bind(this))}this.a=!0,this.c=t,c.call(this)}catch(i){o.call(this,i)}}function o(t){this.a=!1,this.c=t,c.call(this)}function c(){for(var t=0,n=this.b.length;n>t;t++)i.call(this,this.b[t]);this.b=null}function r(t,n,i){var e=!1;try{t(function(t){e||(e=!0,n(t))},function(t){e||(e=!0,i(t))})}catch(o){e||(e=!0,i(o))}}return n.prototype["catch"]=function(t){return this.then(null,t)},n.prototype.then=function(t,e){var o=this;return new n(function(n,c){i.call(o,{d:t,e:e,resolve:n,reject:c})})},n.resolve=function(t){return t&&"object"==typeof t&&t.constructor===n?t:new n(function(n){n(t)})},n.reject=function(t){return new n(function(n,i){i(t)})},n}"undefined"!=typeof module&&(module.f=m);