<script>
  /** @polymerBehavior PluginInstanceCJ */
  PluginInstanceCJ = {

    pluginInstanceTemplate: function(){

      var template = [
        {'name' : 'id', 'value' : ''},
        {'name' : 'plugin_name', 'value' : ''},
        {'name' : 'previous_id', 'value' : ''},
        {'name' : 'status', 'value' : ''}
      ];

      return template;

    },

    generatePluginInstanceCJ: function( id, previous_id ){

      var cj = {};
      cj.collection = {};

      // create the href field
      cj.collection.href = this.apiRoot + '/plugins/instances/' + id + '/';

      // create the template field
      cj.collection.template = {};
      cj.collection.template.data = this.pluginInstanceTemplate();

      // create the items field
      cj.collection.items = [];

      var feedID = Math.round( Math.random() * 100 );

      var plugins = this.plugins();
      var plugin = plugins[Math.floor(Math.random() * plugins.length)];

      // ensure previous_id 
      if( previous_id >= 0 && previous_id >= id ){

        id += previous_id;

      }

      data = {
          id: id,
          plugin_name: plugin.name,
          previous_id: previous_id,
          status: feedID < 10 ? 'started' : 'finishedSuccessfully'
      };

      var item = this.generateItemDataCJ( cj.collection.template.data, data );
      item.href = this.apiRoot + '/plugins/instances/' + id + '/';
      item.links = [{
          rel: 'feed',
          href: this.apiRoot + '/' + feedID + '/'
      }];

      cj.collection.items.push( item );

      return cj;

    }

  }
</script>