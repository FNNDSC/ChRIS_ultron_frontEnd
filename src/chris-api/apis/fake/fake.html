<link rel="import" href="cj/helper-behavior.html">
<link rel="import" href="cj/comment-collection-behavior.html">
<link rel="import" href="cj/comment-behavior.html">
<link rel="import" href="cj/feed-collection-behavior.html">
<link rel="import" href="cj/feed-behavior.html">
<link rel="import" href="cj/label-collection-behavior.html">
<link rel="import" href="cj/label-behavior.html">
<link rel="import" href="cj/note-behavior.html">
<link rel="import" href="cj/pacsquery-behavior.html">
<link rel="import" href="cj/plugin-collection-behavior.html">
<link rel="import" href="cj/plugin-behavior.html">
<link rel="import" href="cj/pluginfs-collection-behavior.html">
<link rel="import" href="cj/pluginfs-behavior.html">

<script>
    /** @polymerBehavior FakeAPI */
    // extending behaviors
    // https://www.polymer-project.org/1.0/docs/devguide/behaviors
    FakeAPI = [
      HelperCJ,
      CommentCollectionCJ,
      CommentCJ,
      FeedCollectionCJ,
      FeedCJ,
      LabelCollectionCJ,
      LabelCJ,
      NoteCJ,
      PacsqueryCJ,
      PluginCollectionCJ,
      PluginCJ,
      PluginFSCollectionCJ,
      PluginFSCJ,
      FakeAPIImpl
    ]

    FakeAPIImpl = {

      urlFakeAPI: function( type ){

        // might need to take this.method into account too
        switch( type ){
          case 'login':
            // something that allows POST
            return 'https://httpbin.org/post';
          default:
            return 'data/' + type + '.json';
          }
        },

      formatFakeAPIResponse: function(type, response){

        console.log( response );

        switch( type ){
          case 'login':
            return {
              status: true,
              message: 'Successful login.',
              token: 'kjASD12dasS'
            };
          default:
            // to nothing yet.
            break;
        }

        //
        var itemCJ = {};

        // Simulate GET
        if( this.method === 'GET' && type === 'comments' ){

          itemCJ = this.generateCommentCollectionCJ();

        }
        else if( this.method === 'GET' && type === 'feeds' ){

          itemCJ = this.generateFeedCollectionCJ( response.data );

        }
        else if( this.method === 'GET' && type === 'labels' ){

          itemCJ = this.generateLabelCollectionCJ();

        }
        else if( this.method === 'GET' && type === 'note' ){

          itemCJ = this.generateNoteCJ();

        }
        else if( this.method === 'GET' && type === 'plugins' ){

          itemCJ = this.generatePluginCollectionCJ();

        }
        else if( this.method === 'GET' && type === 'pluginsFS' ){

          itemCJ = this.generatePluginFSCollectionCJ( response.data);

        }
        else if( this.method === 'GET' && type === 'pacsquery' ){

          itemCJ = this.generatePacsqueryCJ( response.data);

        }

        // Simulate POST/PUT
        if( this.method !== 'GET' ){

          itemCJ.collection = {};
          itemCJ.collection.href = response.json.href;

        }

        // Generate errors...
        if( this.apiError ){

          itemCJ.collection.error = {
            'title'   : 'API Error',
            'code'    : 'X1234',
            'message' : this.method + ' : ' + itemCJ.collection.href + ' could not be processed.'
          };

        }

        return itemCJ;
      }

    }

</script>
