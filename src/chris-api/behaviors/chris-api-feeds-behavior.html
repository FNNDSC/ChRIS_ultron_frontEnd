<script>
    /** @polymerBehavior Feeds */
    Feeds = {

      prepareFeeds: function( what ){

        this.handleAs = 'json';

        switch( what ){

          case 'url':

            // shoud be empty as it is main entry point in API
            var suffix = '/data/feeds.json';
            var url = this.apiRoot + suffix;

            return url;

          case 'params':
            return this.params;

          case 'body':
            return this.body;

          default:
            break;

          }

        return false;
      },

      handleFeeds: function( ){

        // generate fake data with CJ helpers
        var feedsCJ = this.generateFeedCollectionCJ( this.response );
        
        // parse fake CJ response and format it as needed
        var feeds = this.formatResponseFeeds( feedsCJ );

        console.log( feeds );

        return feeds;

      },

      formatResponseFeeds: function( feedsCJ ){

        var feedObj = JSON.parse( feedsCJ );
        var items = feedObj.collection.items;
        var template = feedObj.collection.template;

        var feeds = [];

        for( var i=0; i<items.length; i++ ){

          var feed = {};
          
          feed.href = items[i].href;
          feed.template = template;

          feed.data = {};
          for( var j=0; j < items[i].data.length; j++ ){

            feed.data[ items[i].data[j].name ] = items[i].data[j].value;

          }

          feed.links = {};
          for( var j=0; j < items[i].links.length; j++ ){

            feed.links[ items[i].links[j].rel ] = items[i].links[j].href;

          }

          feeds.push(feed);

        }

        return feeds;

      },

      handleErrorFeeds: function( ){

        return this.error;

      }

    };
</script>