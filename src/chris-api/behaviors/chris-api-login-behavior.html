<script>
    /** @polymerBehavior Login */
    Login = {

      prepareLogin: function( what ){

        this.handleAs = 'json';

        switch( what ){

          case 'url':

            var url = '/data/feeds.json';

            return url;

          case 'params':

            // create new DB if flag on (could be on the login page)
            if( this.createDB ){

              this.params.createNewDB = 1;

            }

            // always add db path
            this.params.DBpath = this.dbPath;

            return this.params;

          case 'body':

            return this.body;

          default:

            break;

          }
        return false;
      },

      handleLogin: function( request ){

        var response = {};
        // ChRIS API login not working so dummy check
        // dummy test, should only rely on response!
        var match = ( Math.random() > 0.1 );

        response = {
          status: match,
          message: match? 'Successful login.' : 'Username and password do not match.',
          token: 'ABCDEF123456789'
        };

        return response;
      },

      handleErrorLogin: function( request ){

        return this.error;

      }
    };
</script>