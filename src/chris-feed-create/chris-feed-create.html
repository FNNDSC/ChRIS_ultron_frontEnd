
      <!--
@license
Copyright (c) 2016 FNNDSC. All rights reserved.
-->


<link rel="import" href="../../bower_components/polymer/polymer.html">


<!-- APP LAYOUT -->
<link rel="import" href="../../bower_components/app-layout/app-toolbar/app-toolbar.html">

<!-- IRON ELEMENTS -->
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-icons/av-icons.html">
<link rel="import" href="../../bower_components/iron-icons/communication-icons.html">
<link rel="import" href="../../bower_components/iron-icons/social-icons.html">

<!-- STYLE -->
<link rel="import" href="../chris-ultron/chris-ultron-styles.html">

<dom-module id="chris-feed-create">

  <template>

    <style include="chris-ultron-styles"></style>
    <style>
    :host{
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
    }
    
    .container {
      position: fixed;
      height: 100vh;
      width: 100vw;
    }

    #card {
      position: relative;
      margin: 64px 100px 0;
      min-height: 100vh;
      /*height: 100%;*/
      background-color: var(--paper-grey-50);
    }

    .big {
      --iron-icon-height: 48px;
      --iron-icon-width: 48px;
      margin-right:24px;
    }
    </style>

      <div id="container" class$="light container {{plugin.color}}">
      </div>
              <div id="card">
              <app-toolbar class$="primary {{plugin.color}}"><iron-icon class="big" icon$="{{plugin.icon}}"></iron-icon> {{plugin.label}}</app-toolbar>
              
              
        </div>
  </template>


  <script>
    Polymer({
        is: 'chris-feed-create',
        properties: {
          plugin: {
            type: Object,
            observer: '_pluginChanged'
          }
        },
        _pluginChanged: function(){

          // remove child if any
          var node = Polymer.dom(this.$.card).querySelector('.plugin');
          if(node){
            Polymer.dom(this.$.card).removeChild(node);
          }
          
          // fetch the plugin!
          var self = this;
          Polymer.Base.importHref(
            this.plugin.url,
            function(evt){
              var plugin = document.createElement(self.plugin.name);
              plugin.classList.add('plugin');
              Polymer.dom(self.$.card).appendChild(plugin);
            },
            function(evt){
              window.console.log('oops, something went wrong...');
              window.console.log(evt);
            },
            true);
        }
  });
  </script>
</dom-module>
