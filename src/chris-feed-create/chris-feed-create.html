
      <!--
@license
Copyright (c) 2016 FNNDSC. All rights reserved.
-->


<link rel="import" href="../../bower_components/polymer/polymer.html">

<!-- CHRIS -->
<link rel="import" href="../chris-api/chris-api.html">

<dom-module id="chris-feed-create">

  <template>

    <style>
    :host{
         position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    }
      #container {
          position: fixed;
    height: 100vh;
    width: 100vw;
    background-color: var(--paper-teal-100);
      }

      #card {
        position: relative;
    margin: 64px 100px 0;
    min-height: 100vh;
    /*height: 100%;*/
    background-color: var(--paper-grey-50);
      }
    </style>

      <chris-api id="chrisAPI" url="../../data/pacs_pull/pacs_pull.html" api="PluginPacspull" response="{{plugin}}" on-return="handlePlugin"></chris-api>

      <div id="container">
      </div>
              <div id="card">
        </div>
  </template>


  <script>
    Polymer({
        is: 'chris-feed-create',
        properties: {
          plugin: {
            type: Object
          }
        },
        handlePlugin: function(){
          window.console.log('handle plugin');
          // got the url, load it now!!
          // what if it i loaded already?
          // if(Polymer.isIntance(this.plugin.name)){
          //   return;
          // }
          var self = this;
          Polymer.Base.importHref(
            this.plugin.url,
            function(evt){
              var plugin = document.createElement(self.plugin.name);
              Polymer.dom(self.$.card).appendChild(plugin);
            },
            function(evt){
              window.console.log('oops, something went wrong...');
              window.console.log(evt);
            },
            true);
        },
  });
  </script>
</dom-module>
