<!--
@license
Copyright (c) 2016 FNNDSC. All rights reserved.
-->

<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../chris-plugin/chris-plugin.html">

<dom-module id="chris-plugin-list">

  <template>

    <style>
      .primary {
        @apply(--layout-flex);
        @apply(--layout-vertical);
        font-size: 16px;
        font-weight: bold;
      }
    </style>

    <div class="primary">
    Plugins
    </div>

    <div id="plugins" on-newplugin="newPlugin" on-modified="handleSize">
      <chris-plugin plugin="[[plugins.data]]"></chris-plugin>
      <chris-plugin plugin="[[plugins.data]]"></chris-plugin>
      <chris-plugin plugin="[[plugins.data]]"></chris-plugin>
      <chris-plugin plugin="[[plugins.data]]"></chris-plugin>
      <chris-plugin plugin="[[plugins.data]]"></chris-plugin>
      <chris-plugin plugin="[[plugins.data]]" selected="true"></chris-plugin>
      <!-- use list... -->
    </div>

  </template>

  <script>
    Polymer({
        is: 'chris-plugin-list',
        properties: {
          plugins: {
            type: Object // to change to array..?
          },
          feedindex:{
            type:Number
          }
        },
        newPlugin: function(evt){
          // add new plugin
          var plugin = document.createElement('chris-plugin');
          plugin.plugin = 'I am new!';
          Polymer.dom(this.$.plugins).appendChild(plugin);

          this.handleSize(null);

          // this.fire('scrollto', {offsetTop: plugin.offsetTop});
        },

        handleSize: function( evt ){

          this.fire('size', {index: this.feedindex});

        }
    });
  </script>
</dom-module>
