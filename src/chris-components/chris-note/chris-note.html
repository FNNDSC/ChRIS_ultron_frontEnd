<html><head><link rel="import" href="../../../bower_components/polymer/polymer.html">


<link rel="import" href="../../../bower_components/iron-autogrow-textarea/iron-autogrow-textarea.html">
<link rel="import" href="../../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../../bower_components/iron-flex-layout/iron-flex-layout.html">


<link rel="import" href="../../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../../bower_components/paper-icon-button/paper-icon-button.html">

<link rel="import" href="../../../bower_components/marked-element/marked-element.html">


<link rel="import" href="../../chris-api/chris-api.html">

</head><body><dom-module id="chris-note">
  <template>
    <style>.toolbar{min-height:48px;@apply (--layout-horizontal);@apply (--layout-end);@apply (--layout-wrap);padding:16px;font-size:24px;font-weight:400;color:#737373;}.name{font-size:16px;font-weight:bold;color:var(--primary-text-color);}.spacer{@apply (--layout-flex);}paper-icon-button{border-bottom:1px solid var(--accent-color);color:var(--secondary-text-color);}.content{}#editor{display:none;width:inherit;}.markdown-html pre code{display:flex;padding:10px;color:#ffffff;background-color:var(--paper-grey-800);}.markdown-html code{padding:10px;background-color:#ffffff;color:var(--accent-color);font-weight:bold;}.markdown-html blockquote p{background-color:#ffffff;padding:8px;}.markdown-html table{border-collapse:collapse;}.markdown-html table, .markdown-html th, .markdown-html td{border:1px solid black;}paper-card{width:800px;}@media (max-width: 800px){paper-card{width:100%;}}paper-card{color:var(--primary-text-color);--paper-card-header-color:var(--secondary-text-color);--paper-card-background-color:var(--paper-grey-100);background:var(--paper-grey-100);}</style>

        <paper-card>

              <div class="toolbar">

 <div class="title" title="">Note</div>

      <div class="spacer"></div>

      <template is="dom-if" if="{{!editing}}">
        <paper-icon-button icon="icons:create" on-tap="edit"></paper-icon-button>
      </template>
      <template is="dom-if" if="{{editing}}">
        <paper-icon-button icon="icons:save" on-tap="save"></paper-icon-button>
        <paper-icon-button icon="icons:close" on-tap="close"></paper-icon-button>
      </template>

      <a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Here-Cheatsheet" target="_blank">
        <paper-icon-button icon="help-outline"></paper-icon-button>
      </a>

      </div>

      <div class="card-content">


    <chris-api id="ItemAPI" api="Item" ,="" content-type="application/json" on-response="handleItem" error="{{error}}" on-error="handleError">
    </chris-api>

    <div id="note" class="note">

      



      

      <div class="content">

        <iron-autogrow-textarea id="editor" value="{{note.data.0.data.content}}" on-input="_updateContent"></iron-autogrow-textarea>
        
        <marked-element id="md" markdown="[[note.data.0.data.content]]">
          <div class="markdown-html"></div>
        </marked-element>
      </div>

    </div>

          </div>
    </paper-card>

  </template>

  <script>Polymer({is:"chris-note",properties:{note:{type:Object},previousContent:{type:String},editing:{type:Boolean,value:!1},error:{type:Object}},_stopEventPropagation:function(t){t.stopPropagation()},edit:function(t){this._stopEventPropagation(t),this.editing=!0,this.previousContent=this.note.data[0].data.content,this.$.editor.style.display="block"},close:function(t){this._stopEventPropagation(t),this.editing=!1,this.note.data[0].data.content=this.previousContent,this.$.editor.value=this.previousContent,this.$.md.markdown=this.previousContent,this.$.editor.style.display="none"},save:function(t){this._stopEventPropagation(t),this.editing=!1,this.$.editor.style.display="none";var e=this.note.data[0];e.template=this.note.template,e.href=this.note.href,e.cache=[{name:"content",value:this.previousContent}],this.$.ItemAPI.request("PUT",e.href,e)},handleItem:function(t){if(t.preventDefault(),t.stopPropagation(),t.detail){var e=t.detail;e.error&&e.error.code&&(this.note.data[0].data.content=e.cache[0].value,this.$.editor.value=e.cache[0].value,this.$.md.markdown=e.cache[0].value,this.fire("notification",e.error))}},handleError:function(){console.log(this.error)},_updateContent:function(){this.$.md.markdown=this.$.editor.value}});</script>
</dom-module>
</body></html>