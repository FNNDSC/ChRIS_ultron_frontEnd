<!--
@license
Copyright (c) 2016 FNNDSC. All rights reserved.
-->

<link rel="import" href="../../bower_components/polymer/polymer.html">

<!-- IRON ELEMENTS -->
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../bower_components/iron-list/iron-list.html">

<!-- PAPER ELEMENTS -->
<!-- <link rel="import" href="../../bower_components/paper-spinner/paper-spinner.html"> -->
<!-- <link rel="import" href="../../bower_components/paper-material/paper-material.html"> -->
  <link rel="import" href="../../bower_components/paper-button/paper-button.html">
    <link rel="import" href="../../bower_components/paper-dialog/paper-dialog.html">
  <link rel="import" href="../../bower_components/paper-item/paper-item.html">
  <link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
  <link rel="import" href="../../bower_components/paper-menu/paper-menu.html">
  <link rel="import" href="../../bower_components/paper-menu-button/paper-menu-button.html">

<link rel="import" href="../chris-feed/chris-feed.html">

<dom-module id="chris-feed-list">

  <template>

    <style>

      :host {

        display: block;

      }

      iron-list {

        padding-top: 16px;
        padding-bottom: 64px;
        --iron-list-items-container: {
          max-width: 800px;
          margin: auto;
          margin-top: 30px;
          margin-bottom: 60px;
          border-bottom: 1px solid var(--accent-color);
        };

      }

    </style>


    <!-- CAN NOT ENCAPSULATE DIALOG AND DROPDOWN IN THE IRON LIST...
     https://github.com/PolymerElements/iron-list/issues/242 -->

    <!-- DIALOG -->
    <paper-button on-tap="openDialog">plain dialog</paper-button>
    <paper-dialog id="dialog" fitInto="[[scrollTarget]]">
      <h2>Header</h2>
      <div>Dialog body</div>
    </paper-dialog>

    <iron-list id="feeds" items="[[feeds]]" as="feed" selection-enabled multi-selection on-resize-feed="resizeFeed" scroll-target="[[scrollTarget]]">

      <template>

        <chris-feed index="[[index]]" feed="[[feed]]" open="[[selected]]"></chris-feed>

      </template>
      
    </iron-list>

  </template>

  <script>
    Polymer({
        is: 'chris-feed-list',
        properties: {

          feeds: {
            type: Array
          },

          scrollTarget: HTMLElement

        },

        openDialog: function(){

          this.$.dialog.fitInto = this.scrollTarget;
          this.$.dialog.open();

        },

        resizeFeed: function( event ){

          this.$.feeds.updateSizeForItem( event.detail.index );

        }

    });
  </script>
</dom-module>
