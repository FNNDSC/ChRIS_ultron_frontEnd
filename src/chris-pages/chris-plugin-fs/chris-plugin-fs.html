<html><head><meta charset="UTF-8"><link rel="import" href="../../chris-ultron/chris-ultron.html"></head><body><dom-module id="chris-plugin-fs">

  <template>

    <style>:host{background-color:var(--dark-primary-color);--paper-input-container-focus-color:var(--accent-color);}app-header-layout{position:absolute;top:0;right:0;left:0;bottom:0;}app-toolbar{color:#ffffff;}.content{min-height:110vh;}a{color:#ffffff;}#card{position:relative;max-width:800px;margin:auto;margin-top:64px;margin-bottom:100px;background-color:var(--paper-grey-50);}paper-fab{z-index:10;position:fixed;bottom:16px;right:16px;}@media all and (max-width: 800px){#card{margin:0;}}</style>

    <app-header-layout has-scrolling-region="" style$="[[_setLayoutStyle(pluginFs.color)]]">
      <app-header fixed="" condenses="" effects="waterfall">
        <app-toolbar style$="[[_setToolbarStyle(pluginFs.color)]]">
          <div title="">[[pluginFs.name]]</div>
          <a class="back" href="/home">
            <paper-icon-button icon="icons:clear"></paper-icon-button>
          </a>
        </app-toolbar>
      </app-header>
      <div class="content">
        <div id="card">
        </div>

        <a href="/home">
          <paper-fab icon="av:play-arrow" title="play-arrow" on-tap="_getParamters"></paper-fab>
        </a>

      </div>
    </app-header-layout>

  </template>


  <script>Polymer({is:"chris-plugin-fs",properties:{pluginFs:{type:Object,observer:"_pluginFSChanged"},feed:{type:Object}},_pluginFSChanged:function(){var e=Polymer.dom(this.$.card).querySelector(".plugin");e&&(Polymer.dom(this.$.card).removeChild(e),e.removeEventListener("parameters-changed",this._createFeed)),console.log(this.pluginFs.name),Polymer.Base.importHref(this.resolveUrl("../../chris-apps/chris-apps-"+this.pluginFs.name+"/chris-apps-"+this.pluginFs.name+".html"),function(e){var t=document.createElement("chris-apps-"+this.pluginFs.name);t.classList.add("plugin"),Polymer.dom(this.$.card).appendChild(t),t.addEventListener("parameters-changed",this._createFeed.bind(this))}.bind(this),function(e){window.console.log("oops, something went wrong..."),window.console.log(e)}.bind(this),!0)},_getParamters:function(){var e=Polymer.dom(this.$.card).querySelector(".plugin");e.generateParameters()},_createFeed:function(){var e=Polymer.dom(this.$.card).querySelector(".plugin");this.feed={},this.feed.details={id:"",name:"created by "+this.pluginFs.name,opened:!1,checked:!1,color:this.pluginFs.color,favorite:!1,status:"running",tags:[],selected:!1,letter:this.pluginFs.name.charAt(0).toUpperCase(),date:(new Date).toString()},this.feed.plugins=[{label:this.pluginFs.name,color:this.pluginFs.color,id:0,parentID:0,depth:0,icon:"icons:cloud-queue",workflow:[{color:this.pluginFs.color,icon:"icons:cloud-queue",label:this.pluginFs.name}]}],this.feed.comments=[],this.feed.note="# Note about "+this.pluginFs.name+"\n\n---\n### parameters\n";for(var t=Object.keys(e.parameters),n=0;n<t.length;n++){var s=t[n];this.feed.note+="*"+s+"* : "+e.parameters[s]+"\n\n"}this.fire("feed-changed")},_setLayoutStyle:function(e){e=e.replace("#","");var t=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),s=parseInt(e.substring(4,6),16);return"background-color: rgba("+t+","+n+","+s+", 0.5);"},_setToolbarStyle:function(e){return"background-color: "+e+";"}});</script>
</dom-module>
</body></html>