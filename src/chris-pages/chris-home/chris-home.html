<html><head><meta charset="UTF-8"><link rel="import" href="../../chris-ultron/chris-ultron.html"></head><body><div hidden="" by-vulcanize=""><dom-module id="chris-feed" assetpath="../../chris-components/chris-feed/">

  <template>

    <style include="iron-flex iron-flex-alignment"><style>

      :host{display:block;}.feed{@apply (--layout-flex);@apply (--layout-vertical);padding:20px;background-color:white;margin-bottom:10px;}.feed:hover{@apply (--shadow-elevation-8dp);}.feed.checked{background-color:var(--paper-grey-200);border-left:4px solid var(--accent-color);}.toolbar{min-height:64px;@apply (--layout-horizontal);@apply (--layout-wrap);}.check-area{height:48px;width:48px;border-radius:24px;box-sizing:border-box;@apply (--layout-vertical);@apply (--layout-center);@apply (--layout-center-justified);}.check-area .invalid{color:var(--paper-red-500);border-color:var(--paper-red-500)!important;background-color:#ffffff;border-radius:26px;cursor:pointer;padding:0;width:52px;height:52px;}.check-area:hover .invalid{background-color:var(--paper-red-500);color:#ffffff;}.check-area:hover, .checked .check-area{background-color:var(--accent-color);border-color:var(--accent-color)!important;}.letter{font-size:24px;}.check-area:hover .letter, .checked .letter{display:none;}.checkbox{display:none;--paper-checkbox-checked-color:var(--accent-color);--paper-checkbox-checked-ink-color:var(--accent-color);--paper-checkbox-unchecked-color:#ffffff;--paper-checkbox-unchecked-ink-color:var(--dark-accent-color);--paper-checkbox-size:24px;--paper-checkbox-label-spacing:0px;}.check-area:hover .checkbox, .checked .checkbox{display:block;}.title-area{padding:0 16px;@apply (--layout-flex);@apply (--layout-vertical);}.name{font-size:16px;font-weight:bold;color:var(--primary-text-color);}.date, .tags{font-size:14px;color:var(--secondary-text-color);}#favorite[icon="icons:favorite"]{color:var(--accent-color);}.done{color:var(--paper-light-green-500);}.running{color:var(--paper-light-blue-500);}.error{color:var(--paper-red-500);}.action:hover{color:var(--accent-color);}.content{margin-top:8px;min-height:64px;display:none;}.feed.open .content{display:block;}@media all and (max-width: 800px){.toolbar{@apply (--layout-justified);}.title-area{flex:1 100%;padding:16px 0 0;}.check-area{order:1;}.actions-area{order:2;}.title-area{order:3;}}</style>

    <chris-api id="FeedAPI" api="Item" ,="" content-type="application/json" on-response="handleFeedDetails" error="{{error}}" on-error="handleError">
    </chris-api>

    <paper-material id="feed" class="feed" elevation="1">

      
      <div class="toolbar">

        
        <div class="check-area" style$="[[_setStyle(feed.data.color)]]" on-tap="_blockEvents">

          <template is="dom-if" if="{{!valid}}">

            <paper-icon-button id="invalid" class="invalid" icon="icons:bug-report" disabled=""></paper-icon-button>

          </template>

          <template is="dom-if" if="{{valid}}">

              <span class="letter">[[feed.data.letter]]</span>
              <paper-checkbox class="checkbox" checked="{{checked}}"></paper-checkbox>

          </template>

        </div>

        
        <div class="title-area">

          <div class="name">Feed [[feed.data.id]] - [[feed.data.name]]</div>
          <div class="date">[[feed.data.date]]</div>
          <div class="tags">

            <template is="dom-repeat" items="[[_validateTags(feed.data.tags)]]">

              <span class="tag" style$="{{_setTagStyle(item.color)}}">#<span>{{item.name}}</span></span>

            </template>

          </div>

        </div>

        
        <div class="actions-area" on-tap="_blockEvents">

          <paper-icon-button id="share" class="action" icon="social:share" on-tap="share"></paper-icon-button>
          <paper-icon-button id="tag" class="action" icon="icons:label-outline" on-tap="tag"></paper-icon-button>
          <paper-icon-button id="favorite" class="action" icon$="[[_setFavoriteIcon(feed.data.favorite)]]" on-tap="favorite"></paper-icon-button>
          <paper-icon-button id="status" icon$="[[_setStatusIcon(feed.data.status)]]" class$="[[feed.data.status]]" disabled=""></paper-icon-button>

          <paper-tooltip for="share" offset="0">Share</paper-tooltip>
          <paper-tooltip for="tag" offset="0">Tag</paper-tooltip>
          <paper-tooltip for="favorite" offset="0">Favorite</paper-tooltip>

        </div>

      </div>

    </paper-material>

  </template>

  <script>Polymer({is:"chris-feed",properties:{feed:{type:Object,observer:"_validateFeed"},checked:{type:Boolean,value:!1,observer:"_checkedChanged"},open:{type:Boolean,value:!1},index:{type:Number},valid:{type:Boolean},error:{type:Array}},_setStyle:function(e){return"border: 4px solid "+e+";"},_setStatusIcon:function(e){var t="icons:";return t+="running"===e?"schedule":"error"===e?"clear":"done"},_checkedChanged:function(){this.checked?this.$.feed.classList.add("checked"):this.$.feed.classList.remove("checked")},share:function(e){e.preventDefault(),e.stopPropagation(),this.valid&&console.log("share feed")},tag:function(e){e.preventDefault(),e.stopPropagation(),!this.valid},_setTagStyle:function(e){return"color: "+e+";"},favorite:function(e){if(e.preventDefault(),e.stopPropagation(),this.valid){var t=[{name:"favorite",value:this.feed.data.favorite}];this.set("feed.data.favorite",!this.feed.data.favorite),this._saveFeed(t)}},_setFavoriteIcon:function(e){return e?"icons:favorite":"icons:favorite-border"},handleFeedDetails:function(e){if(e.preventDefault(),e.stopPropagation(),e.detail){var t=e.detail;if(t.error&&t.error.code){for(var a=0;a<t.cache.length;a++)this.set("feed.data."+t.cache[a].name,t.cache[a].value);this.fire("notification",t.error)}}},_saveFeed:function(e){var t=this.feed.data;t.template=this.feed.template,t.href=this.feed.href,t.cache=e;this.$.FeedAPI.request("PUT",this.feed.href,t)},handleError:function(e){this.$.FeedDetailsAPI.url="",e.preventDefault(),e.stopPropagation(),console.log(this.error)},_validateFeed:function(){if(this.feed&&this.feed.data){var e=[];if("string"!=typeof this.feed.data.id&&e.push("id:String"),"string"!=typeof this.feed.data.name&&e.push("name:String"),"string"!=typeof this.feed.data.letter&&e.push("letter:String"),"string"!=typeof this.feed.data.color&&e.push("color:String"),"string"!=typeof this.feed.data.date&&e.push("date:String"),"string"!=typeof this.feed.data.status&&e.push("status:String"),"boolean"!=typeof this.feed.data.favorite&&e.push("favorite:Boolean"),this.feed.data.tags&&this.feed.data.tags.constructor===Array||e.push("tags:Array"),e.length>0)return console.log(e),this.error=e,this.fire("error-changed"),this.valid=!1,this.fire("valid-changed"),void this.fire("error");this.valid=!0,this.fire("valid-changed")}},_validateTags:function(e){return e&&e.constructor===Array?e:[]},_blockEvents:function(e){e.preventDefault(),e.stopPropagation()}});</script>
</dom-module>
<dom-module id="chris-feed-list" assetpath="../../chris-components/chris-feed-list/">

  <template>

    <style>:host{display:block;}iron-list{padding-top:16px;padding-bottom:64px;--iron-list-items-container:{max-width:800px;margin:auto;margin-top:30px;margin-bottom:60px;border-bottom:1px solid var(--accent-color);};}a{color:inherit;}</style>

    <iron-list id="feeds" items="[[feeds.data]]" as="feed" selection-enabled="" on-resize-feed="resizeFeed" scroll-target="[[scrollTarget]]">

      <template>

        <a href="/detail/{{index}}/">

          <chris-feed index="[[index]]" feed="[[feed]]" on-tap="_showDetails"></chris-feed>

        </a>


      </template>
      
    </iron-list>


  </template>

  <script>Polymer({is:"chris-feed-list",properties:{feeds:{type:Array},feedOpened:{type:Object},scrollTarget:HTMLElement},resizeFeed:function(e){this.$.feeds.updateSizeForItem(e.detail.index)},_showDetails:function(e){this.set("feedOpened",e.model.__data__.feed),this.fire("feed-opened-changed",e.model.__data__.feed)}});</script>
</dom-module>
<dom-module id="chris-label-list" assetpath="../../chris-components/chris-label-list/">

  <template>

    <style include="iron-flex iron-flex-alignment"><style>

      :host{display:flex;position:absolute;}.separator{font-size:14px;font-weight:500;color:var(--primary-text-color);padding:16px 16px 0;border-top:1px solid rgb(224, 224, 224);}.favorite{color:var(--accent-color);}.done{color:var(--paper-light-green-500);}.running{color:var(--paper-light-blue-500);}.error{color:var(--paper-red-500);}</style>

    
    <div class="separator">Categories</div>

    <paper-menu id="labels" class="layout vertical" attr-for-selected="value" on-iron-select="handleSelect" on-iron-deselect="updateFilter" multi="">

      <paper-icon-item value="all" role="menuitem">
        <iron-icon icon="icons:view-headline" item-icon=""></iron-icon>All
      </paper-icon-item>
      <paper-icon-item value="favorite" role="menuitem">
        <iron-icon class="favorite" icon="icons:favorite" item-icon=""></iron-icon>Favorite
      </paper-icon-item>
      <paper-icon-item value="running" role="menuitem">
        <iron-icon class="running" icon="icons:schedule" item-icon=""></iron-icon>Running
      </paper-icon-item>
      <paper-icon-item value="done" role="menuitem">
        <iron-icon class="done" icon="icons:done" item-icon=""></iron-icon>Done
      </paper-icon-item>
      <paper-icon-item value="error" role="menuitem">
        <iron-icon class="error" icon="icons:clear" item-icon=""></iron-icon>Error
      </paper-icon-item>


    </paper-menu>


    
    
    
    <div class="separator">Labels</div>



    <paper-menu id="customLabels" class="layout vertical" attr-for-selected="value" multi="" on-iron-select="updateCustomFilter" on-iron-deselect="updateCustomFilter">

      <template is="dom-repeat" items="{{customLabels.data}}">

        <paper-icon-item id="{{item.data.title}}" value$="{{item.data.title}}" role="menuitem">
          <iron-icon icon="label" item-icon="" style$="{{_setStyle(item.data.color)}}" invert=""></iron-icon><span>{{item.data.title}}</span>
        </paper-icon-item>

      </template>

    </paper-menu>


  </template>

  <script>Polymer({is:"chris-label-list",properties:{customLabels:{type:Array},filter:{type:Array,value:[]},customFilter:{type:Array,value:[]}},handleSelect:function(e){var l=e.detail.item.getAttribute("value"),t=this.$.labels.selectedValues;if("all"===l||0===this.$.labels.selectedValues.length)this.$.labels.selectedValues=["all"];else{var s=t.indexOf("all");s>-1&&t.splice(s,1),this.$.labels.selectedValues=t.slice(0)}this.updateFilter()},updateFilter:function(){0===this.$.labels.selectedValues.length&&(this.$.labels.selectedValues=["all"]),this.filter=this.$.labels.selectedValues,this.fire("filter-changed")},updateCustomFilter:function(){this.customFilter=this.$.customLabels.selectedValues,this.fire("custom-filter-changed")},_setStyle:function(e){return"color: "+e}});</script>
</dom-module>
</div><dom-module id="chris-home">

  <template>

    <style include="iron-flex iron-flex-alignment"><style>

      :host{display:block;}app-header{background-color:var(--dark-primary-color);color:#ffffff;}app-header paper-icon-button{--paper-icon-button-ink-color:#ffffff;}.drawer.content{height:100%;overflow:auto;}app-header-layout{background-color:var(--paper-grey-100);}paper-progress{width:100%;--paper-progress-active-color:var(--accent-color);--paper-progress-height:2px;}.loaded paper-progress{display:none;}paper-fab-speed-dial{z-index:10;position:fixed;bottom:16px;right:16px;}paper-fab#create{--paper-fab-background:var(--accent-color);}</style>

    <div id="home">

      
      <chris-api id="FeedsAPI" api="Item" ,="" content-type="application/json" error="{{error}}">
      </chris-api>

      <app-drawer-layout fullbleed="">

        
        <app-drawer>

          <div class="drawer content">

            <app-toolbar>Menu</app-toolbar>
            <chris-label-list custom-labels="{{labels}}"></chris-label-list>

          </div>

        </app-drawer>

        
        <app-header-layout has-scrolling-region="" id="layout">

          <app-header id="header" fixed="" effects="waterfall">
            <app-toolbar>
              <paper-icon-button icon="menu" drawer-toggle=""></paper-icon-button>
              <div title="">ChRIS 3.0 - Ultr√∏n</div>
            </app-toolbar>
          </app-header>

          <div id="content" class="main content">

            <paper-progress indeterminate=""></paper-progress>

            <paper-fab-speed-dial direction="top">
              <paper-fab id="create" icon="add" class="dropdown-trigger"></paper-fab>
              <div class="dropdown-content">
                <template is="dom-repeat" items="{{plugins.data}}">
                  <a href="/plugin-fs">
                    <paper-fab mini="" id="[[item.data.name]]" icon="[[item.data.icon]]" item="[[item]]" style$="[[_setPluginFSStyle(item.data.color)]]" on-tap="_openPluginFS"></paper-fab>
                    <paper-tooltip for="[[item.data.name]]" position="left" animation-delay="0">[[item.data.label]]</paper-tooltip>
                    </a>
                </template>
              </div>
            </paper-fab-speed-dial>

            <chris-feed-list id="feedList" feeds="[[feeds]]" on-notification="_showNotification" scroll-target="[[_getScrollTarget()]]" feed-opened="{{feedOpened}}"></chris-feed-list>

            <paper-toast id="notification" text="This toast auto-closes after 3 seconds"></paper-toast>

          </div>

        </app-header-layout>

      </app-drawer-layout>

    </div>

  </template>

  <script>Polymer({is:"chris-home",properties:{feeds:{type:Array},feed:{type:Object,observer:"_feedChanged"},feedOpened:{type:Object,notify:!0},plugins:{type:Array},pluginFs:{type:Object,notify:!0},labels:{type:Array},error:{type:Object}},ready:function(e){var t=({auth:"user="+sessionStorage.getItem("username")+",hash="+sessionStorage.getItem("token")},this.$.FeedsAPI.request("GET","/feeds"));t.then(this.handleFeeds.bind(this))["catch"](this.handleError.bind(this));var s=this.$.FeedsAPI.request("GET","/pluginsFS");s.then(this.handlePlugins.bind(this))["catch"](this.handleError.bind(this));var i=this.$.FeedsAPI.request("GET","/labels");i.then(this.handleLabels.bind(this))["catch"](this.handleError.bind(this)),this.$.notification.fitInto=this.$.layout},handleFeeds:function(e){this.set("feeds",e),this.showError(e.error),this.$.content.classList.add("loaded")},handleLabels:function(e){this.set("labels",e),this.showError(e.error),this.$.content.classList.add("loaded")},showError:function(e){if(e&&e.code){var t=document.createElement("paper-toast");t.text=e.message,t.fitInto=this.$.layout,this.$.content.appendChild(t),t.show()}},handlePlugins:function(e){console.log(e),this.set("plugins",e),this.showError(e.error),this.$.content.classList.add("loaded")},handleError:function(e){console.error(e)},_showNotification:function(e){this.$.notification.text=e.detail.message,this.$.notification.show()},_getScrollTarget:function(){return this.$.header.scrollTarget},_setPluginFSStyle:function(e){return"background-color: "+e+";"},_openPluginFS:function(e){e&&(console.log(e.model.__data__.item),this.set("pluginFs",e.model.__data__.item))},_feedChanged:function(){this.feed.id=this.feed.details.id=(this.feeds.length+1).toString(),this.unshift("feeds",this.feed)}});</script>
</dom-module>
</body></html>