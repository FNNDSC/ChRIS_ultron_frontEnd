<html><head><meta charset="UTF-8"><link rel="import" href="../../chris-ultron/chris-ultron.html"></head><body><dom-module id="chris-app">

  <template>

    <style>:host{background-color:var(--dark-primary-color);--paper-input-container-focus-color:var(--accent-color);}app-header-layout{position:absolute;top:0;right:0;left:0;bottom:0;}app-toolbar{color:#ffffff;}a{color:#ffffff;}</style>

    <app-header-layout has-scrolling-region="" style$="[[_setLayoutStyle(app.data.color)]]">
      <app-header fixed="" condenses="" effects="waterfall">
        <app-toolbar style$="[[_setToolbarStyle(app.data.color)]]">
          <div main-title="">[[app.data.label]]</div>
          <a class="back" href="/home">
            <paper-icon-button icon="icons:clear"></paper-icon-button>
          </a>
        </app-toolbar>
        <app-toolbar id="appToolbar" style$="[[_setToolbarStyle(app.data.color)]]" sticky="">

        </app-toolbar>
      </app-header>

      <div id="content" class="content">
      </div>

    </app-header-layout>

  </template>


  <script>Polymer({is:"chris-app",properties:{app:{type:Object,observer:"_appChanged"},feed:{type:Object}},_appChanged:function(){var e=Polymer.dom(this.$.content).firstElementChild;e&&(Polymer.dom(this.$.content).removeChild(e),Polymer.dom(this.$.appToolbar).removeChild(Polymer.dom(this.$.appToolbar).firstElementChild),e.removeEventListener("parameters-changed",this._createFeed)),Polymer.Base.importHref(this.resolveUrl("../../chris-apps/chris-apps-"+this.app.data.name+"/chris-apps-"+this.app.data.name+".html"),function(e){var t=document.createElement("chris-apps-"+this.app.data.name);Polymer.dom(this.$.content).appendChild(t),Polymer.dom(this.$.appToolbar).appendChild(t.toolbar),t.addEventListener("parameters-changed",this._createFeed.bind(this))}.bind(this),function(e){window.console.log("oops, something went wrong..."),window.console.log(e)}.bind(this),!0)},_getParamters:function(){var e=Polymer.dom(this.$.content).firstElementChild;e.generateParameters()},_createFeed:function(){var e=Polymer.dom(this.$.content).firstElementChild;this.feed={},this.feed.details={id:"",name:"created by "+this.app.data.name,opened:!1,checked:!1,color:this.app.data.color,favorite:!1,status:"running",tags:[],selected:!1,letter:this.app.data.name.charAt(0).toUpperCase(),date:(new Date).toString()},this.feed.plugins=[{label:this.app.data.name,color:this.app.data.color,id:0,parentID:0,depth:0,icon:"icons:cloud-queue",workflow:[{color:this.app.data.color,icon:"icons:cloud-queue",label:this.app.data.name}]}],this.feed.comments=[],this.feed.note="# Note about "+this.app.data.name+"\n\n---\n### parameters\n";for(var t=Object.keys(e.parameters),a=0;a<t.length;a++){var o=t[a];this.feed.note+="*"+o+"* : "+e.parameters[o]+"\n\n"}this.fire("feed-changed")},_setLayoutStyle:function(e){e=e.replace("#","");var t=parseInt(e.substring(0,2),16),a=parseInt(e.substring(2,4),16),o=parseInt(e.substring(4,6),16);return"background-color: rgba("+t+","+a+","+o+", 0.5);"},_setToolbarStyle:function(e){return"background-color: "+e+";"}});</script>
</dom-module>
</body></html>