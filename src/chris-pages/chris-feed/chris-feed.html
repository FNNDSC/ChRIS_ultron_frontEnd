<html><head><meta charset="UTF-8"><link rel="import" href="../../chris-ultron.html"></head><body><div hidden="" by-vulcanize=""><iron-iconset-svg name="communication" size="24">
<svg><defs>
<g id="business"><path d="M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z"></path></g>
<g id="call"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"></path></g>
<g id="call-end"><path d="M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29L.29 13.08c-.18-.17-.29-.42-.29-.7 0-.28.11-.53.29-.71C3.34 8.78 7.46 7 12 7s8.66 1.78 11.71 4.67c.18.18.29.43.29.71 0 .28-.11.53-.29.71l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28-.79-.74-1.69-1.36-2.67-1.85-.33-.16-.56-.5-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z"></path></g>
<g id="call-made"><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5z"></path></g>
<g id="call-merge"><path d="M17 20.41L18.41 19 15 15.59 13.59 17 17 20.41zM7.5 8H11v5.59L5.59 19 7 20.41l6-6V8h3.5L12 3.5 7.5 8z"></path></g>
<g id="call-missed"><path d="M19.59 7L12 14.59 6.41 9H11V7H3v8h2v-4.59l7 7 9-9z"></path></g>
<g id="call-missed-outgoing"><path d="M3 8.41l9 9 7-7V15h2V7h-8v2h4.59L12 14.59 4.41 7 3 8.41z"></path></g>
<g id="call-received"><path d="M20 5.41L18.59 4 7 15.59V9H5v10h10v-2H8.41z"></path></g>
<g id="call-split"><path d="M14 4l2.29 2.29-2.88 2.88 1.42 1.42 2.88-2.88L20 10V4zm-4 0H4v6l2.29-2.29 4.71 4.7V20h2v-8.41l-5.29-5.3z"></path></g>
<g id="chat"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"></path></g>
<g id="chat-bubble"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"></path></g>
<g id="chat-bubble-outline"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"></path></g>
<g id="clear-all"><path d="M5 13h14v-2H5v2zm-2 4h14v-2H3v2zM7 7v2h14V7H7z"></path></g>
<g id="comment"><path d="M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM18 14H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"></path></g>
<g id="contact-mail"><path d="M21 8V7l-3 2-3-2v1l3 2 3-2zm1-5H2C.9 3 0 3.9 0 5v14c0 1.1.9 2 2 2h20c1.1 0 1.99-.9 1.99-2L24 5c0-1.1-.9-2-2-2zM8 6c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H2v-1c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1zm8-6h-8V6h8v6z"></path></g>
<g id="contact-phone"><path d="M22 3H2C.9 3 0 3.9 0 5v14c0 1.1.9 2 2 2h20c1.1 0 1.99-.9 1.99-2L24 5c0-1.1-.9-2-2-2zM8 6c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H2v-1c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1zm3.85-4h1.64L21 16l-1.99 1.99c-1.31-.98-2.28-2.38-2.73-3.99-.18-.64-.28-1.31-.28-2s.1-1.36.28-2c.45-1.62 1.42-3.01 2.73-3.99L21 8l-1.51 2h-1.64c-.22.63-.35 1.3-.35 2s.13 1.37.35 2z"></path></g>
<g id="contacts"><path d="M20 0H4v2h16V0zM4 24h16v-2H4v2zM20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-8 2.75c1.24 0 2.25 1.01 2.25 2.25s-1.01 2.25-2.25 2.25S9.75 10.24 9.75 9 10.76 6.75 12 6.75zM17 17H7v-1.5c0-1.67 3.33-2.5 5-2.5s5 .83 5 2.5V17z"></path></g>
<g id="dialer-sip"><path d="M17 3h-1v5h1V3zm-2 2h-2V4h2V3h-3v3h2v1h-2v1h3V5zm3-2v5h1V6h2V3h-3zm2 2h-1V4h1v1zm0 10.5c-1.25 0-2.45-.2-3.57-.57-.35-.11-.74-.03-1.01.24l-2.2 2.2c-2.83-1.44-5.15-3.75-6.59-6.59l2.2-2.21c.27-.26.35-.65.24-1C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.5c0-.55-.45-1-1-1z"></path></g>
<g id="dialpad"><path d="M12 19c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM6 1c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12-8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-6 8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></g>
<g id="email"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"></path></g>
<g id="forum"><path d="M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1zm-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z"></path></g>
<g id="import-contacts"><path d="M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1zm0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5v11.5z"></path></g>
<g id="import-export"><path d="M9 3L5 6.99h3V14h2V6.99h3L9 3zm7 14.01V10h-2v7.01h-3L15 21l4-3.99h-3z"></path></g>
<g id="invert-colors-off"><path d="M20.65 20.87l-2.35-2.35-6.3-6.29-3.56-3.57-1.42-1.41L4.27 4.5 3 5.77l2.78 2.78c-2.55 3.14-2.36 7.76.56 10.69C7.9 20.8 9.95 21.58 12 21.58c1.79 0 3.57-.59 5.03-1.78l2.7 2.7L21 21.23l-.35-.36zM12 19.59c-1.6 0-3.11-.62-4.24-1.76C6.62 16.69 6 15.19 6 13.59c0-1.32.43-2.57 1.21-3.6L12 14.77v4.82zM12 5.1v4.58l7.25 7.26c1.37-2.96.84-6.57-1.6-9.01L12 2.27l-3.7 3.7 1.41 1.41L12 5.1z"></path></g>
<g id="live-help"><path d="M19 2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h4l3 3 3-3h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-6 16h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 11.9 13 12.5 13 14h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"></path></g>
<g id="location-off"><path d="M12 6.5c1.38 0 2.5 1.12 2.5 2.5 0 .74-.33 1.39-.83 1.85l3.63 3.63c.98-1.86 1.7-3.8 1.7-5.48 0-3.87-3.13-7-7-7-1.98 0-3.76.83-5.04 2.15l3.19 3.19c.46-.52 1.11-.84 1.85-.84zm4.37 9.6l-4.63-4.63-.11-.11L3.27 3 2 4.27l3.18 3.18C5.07 7.95 5 8.47 5 9c0 5.25 7 13 7 13s1.67-1.85 3.38-4.35L18.73 21 20 19.73l-3.63-3.63z"></path></g>
<g id="location-on"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"></path></g>
<g id="mail-outline"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V8l8 5 8-5v10zm-8-7L4 6h16l-8 5z"></path></g>
<g id="message"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"></path></g>
<g id="no-sim"><path d="M18.99 5c0-1.1-.89-2-1.99-2h-7L7.66 5.34 19 16.68 18.99 5zM3.65 3.88L2.38 5.15 5 7.77V19c0 1.1.9 2 2 2h10.01c.35 0 .67-.1.96-.26l1.88 1.88 1.27-1.27L3.65 3.88z"></path></g>
<g id="phone"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"></path></g>
<g id="phonelink-erase"><path d="M13 8.2l-1-1-4 4-4-4-1 1 4 4-4 4 1 1 4-4 4 4 1-1-4-4 4-4zM19 1H9c-1.1 0-2 .9-2 2v3h2V4h10v16H9v-2H7v3c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2z"></path></g>
<g id="phonelink-lock"><path d="M19 1H9c-1.1 0-2 .9-2 2v3h2V4h10v16H9v-2H7v3c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm-8.2 10V9.5C10.8 8.1 9.4 7 8 7S5.2 8.1 5.2 9.5V11c-.6 0-1.2.6-1.2 1.2v3.5c0 .7.6 1.3 1.2 1.3h5.5c.7 0 1.3-.6 1.3-1.2v-3.5c0-.7-.6-1.3-1.2-1.3zm-1.3 0h-3V9.5c0-.8.7-1.3 1.5-1.3s1.5.5 1.5 1.3V11z"></path></g>
<g id="phonelink-ring"><path d="M20.1 7.7l-1 1c1.8 1.8 1.8 4.6 0 6.5l1 1c2.5-2.3 2.5-6.1 0-8.5zM18 9.8l-1 1c.5.7.5 1.6 0 2.3l1 1c1.2-1.2 1.2-3 0-4.3zM14 1H4c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 19H4V4h10v16z"></path></g>
<g id="phonelink-setup"><path d="M11.8 12.5v-1l1.1-.8c.1-.1.1-.2.1-.3l-1-1.7c-.1-.1-.2-.2-.3-.1l-1.3.4c-.3-.2-.6-.4-.9-.5l-.2-1.3c0-.1-.1-.2-.3-.2H7c-.1 0-.2.1-.3.2l-.2 1.3c-.3.1-.6.3-.9.5l-1.3-.5c-.1 0-.2 0-.3.1l-1 1.7c-.1.1 0 .2.1.3l1.1.8v1l-1.1.8c-.1.2-.1.3-.1.4l1 1.7c.1.1.2.2.3.1l1.4-.4c.3.2.6.4.9.5l.2 1.3c-.1.1.1.2.2.2h2c.1 0 .2-.1.3-.2l.2-1.3c.3-.1.6-.3.9-.5l1.3.5c.1 0 .2 0 .3-.1l1-1.7c.1-.1 0-.2-.1-.3l-1.1-.9zM8 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM19 1H9c-1.1 0-2 .9-2 2v3h2V4h10v16H9v-2H7v3c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2z"></path></g>
<g id="portable-wifi-off"><path d="M17.56 14.24c.28-.69.44-1.45.44-2.24 0-3.31-2.69-6-6-6-.79 0-1.55.16-2.24.44l1.62 1.62c.2-.03.41-.06.62-.06 2.21 0 4 1.79 4 4 0 .21-.02.42-.05.63l1.61 1.61zM12 4c4.42 0 8 3.58 8 8 0 1.35-.35 2.62-.95 3.74l1.47 1.47C21.46 15.69 22 13.91 22 12c0-5.52-4.48-10-10-10-1.91 0-3.69.55-5.21 1.47l1.46 1.46C9.37 4.34 10.65 4 12 4zM3.27 2.5L2 3.77l2.1 2.1C2.79 7.57 2 9.69 2 12c0 3.7 2.01 6.92 4.99 8.65l1-1.73C5.61 17.53 4 14.96 4 12c0-1.76.57-3.38 1.53-4.69l1.43 1.44C6.36 9.68 6 10.8 6 12c0 2.22 1.21 4.15 3 5.19l1-1.74c-1.19-.7-2-1.97-2-3.45 0-.65.17-1.25.44-1.79l1.58 1.58L10 12c0 1.1.9 2 2 2l.21-.02.01.01 7.51 7.51L21 20.23 4.27 3.5l-1-1z"></path></g>
<g id="present-to-all"><path d="M21 3H3c-1.11 0-2 .89-2 2v14c0 1.11.89 2 2 2h18c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2zm0 16.02H3V4.98h18v14.04zM10 12H8l4-4 4 4h-2v4h-4v-4z"></path></g>
<g id="ring-volume"><path d="M23.71 16.67C20.66 13.78 16.54 12 12 12 7.46 12 3.34 13.78.29 16.67c-.18.18-.29.43-.29.71 0 .28.11.53.29.71l2.48 2.48c.18.18.43.29.71.29.27 0 .52-.11.7-.28.79-.74 1.69-1.36 2.66-1.85.33-.16.56-.5.56-.9v-3.1c1.45-.48 3-.73 4.6-.73s3.15.25 4.6.72v3.1c0 .39.23.74.56.9.98.49 1.87 1.12 2.66 1.85.18.18.43.28.7.28.28 0 .53-.11.71-.29l2.48-2.48c.18-.18.29-.43.29-.71 0-.27-.11-.52-.29-.7zM21.16 6.26l-1.41-1.41-3.56 3.55 1.41 1.41s3.45-3.52 3.56-3.55zM13 2h-2v5h2V2zM6.4 9.81L7.81 8.4 4.26 4.84 2.84 6.26c.11.03 3.56 3.55 3.56 3.55z"></path></g>
<g id="rss-feed"><circle cx="6.18" cy="17.82" r="2.18"></circle><path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"></path></g>
<g id="screen-share"><path d="M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.11-.9-2-2-2H4c-1.11 0-2 .89-2 2v10c0 1.1.89 2 2 2H0v2h24v-2h-4zm-7-3.53v-2.19c-2.78 0-4.61.85-6 2.72.56-2.67 2.11-5.33 6-5.87V7l4 3.73-4 3.74z"></path></g>
<g id="speaker-phone"><path d="M7 7.07L8.43 8.5c.91-.91 2.18-1.48 3.57-1.48s2.66.57 3.57 1.48L17 7.07C15.72 5.79 13.95 5 12 5s-3.72.79-5 2.07zM12 1C8.98 1 6.24 2.23 4.25 4.21l1.41 1.41C7.28 4 9.53 3 12 3s4.72 1 6.34 2.62l1.41-1.41C17.76 2.23 15.02 1 12 1zm2.86 9.01L9.14 10C8.51 10 8 10.51 8 11.14v9.71c0 .63.51 1.14 1.14 1.14h5.71c.63 0 1.14-.51 1.14-1.14v-9.71c.01-.63-.5-1.13-1.13-1.13zM15 20H9v-8h6v8z"></path></g>
<g id="stay-current-landscape"><path d="M1.01 7L1 17c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2H3c-1.1 0-1.99.9-1.99 2zM19 7v10H5V7h14z"></path></g>
<g id="stay-current-portrait"><path d="M17 1.01L7 1c-1.1 0-1.99.9-1.99 2v18c0 1.1.89 2 1.99 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z"></path></g>
<g id="stay-primary-landscape"><path d="M1.01 7L1 17c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2H3c-1.1 0-1.99.9-1.99 2zM19 7v10H5V7h14z"></path></g>
<g id="stay-primary-portrait"><path d="M17 1.01L7 1c-1.1 0-1.99.9-1.99 2v18c0 1.1.89 2 1.99 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z"></path></g>
<g id="stop-screen-share"><path d="M21.22 18.02l2 2H24v-2h-2.78zm.77-2l.01-10c0-1.11-.9-2-2-2H7.22l5.23 5.23c.18-.04.36-.07.55-.1V7.02l4 3.73-1.58 1.47 5.54 5.54c.61-.33 1.03-.99 1.03-1.74zM2.39 1.73L1.11 3l1.54 1.54c-.4.36-.65.89-.65 1.48v10c0 1.1.89 2 2 2H0v2h18.13l2.71 2.71 1.27-1.27L2.39 1.73zM7 15.02c.31-1.48.92-2.95 2.07-4.06l1.59 1.59c-1.54.38-2.7 1.18-3.66 2.47z"></path></g>
<g id="swap-calls"><path d="M18 4l-4 4h3v7c0 1.1-.9 2-2 2s-2-.9-2-2V8c0-2.21-1.79-4-4-4S5 5.79 5 8v7H2l4 4 4-4H7V8c0-1.1.9-2 2-2s2 .9 2 2v7c0 2.21 1.79 4 4 4s4-1.79 4-4V8h3l-4-4z"></path></g>
<g id="textsms"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM9 11H7V9h2v2zm4 0h-2V9h2v2zm4 0h-2V9h2v2z"></path></g>
<g id="voicemail"><path d="M18.5 6C15.46 6 13 8.46 13 11.5c0 1.33.47 2.55 1.26 3.5H9.74c.79-.95 1.26-2.17 1.26-3.5C11 8.46 8.54 6 5.5 6S0 8.46 0 11.5 2.46 17 5.5 17h13c3.04 0 5.5-2.46 5.5-5.5S21.54 6 18.5 6zm-13 9C3.57 15 2 13.43 2 11.5S3.57 8 5.5 8 9 9.57 9 11.5 7.43 15 5.5 15zm13 0c-1.93 0-3.5-1.57-3.5-3.5S16.57 8 18.5 8 22 9.57 22 11.5 20.43 15 18.5 15z"></path></g>
<g id="vpn-key"><path d="M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4H12.65zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"></path></g>
</defs></svg>
</iron-iconset-svg>
<dom-module id="chris-feed-about" assetpath="chris-feed-views/chris-feed-about/">
  <template>
    <style>
      :host {
        display: block;
      }

      .content {

        background-color: var(--paper-grey-50);
        @apply(--layout-vertical);
        @apply(--layout-wrap);
        padding: 24px;
        max-width: 800px;
        margin: auto;
        margin-top: 24px;
        margin-bottom: 100px;

      }


      paper-card{
        color: var(--primary-text-color);
        --paper-card-header-color: var(--secondary-text-color);
        --paper-card-background-color: var(--paper-grey-100);
        background: var(--paper-grey-100);
      }

      /*from https://github.com/robdodson/contacts-app*/

      .group {
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        padding: 8px 0;
        position: relative;
      }

      .item {
        padding: 10px 72px;
        color: rgb(102, 102, 102);
      }

      .item iron-icon {
        position: absolute;
        left: 16px;
        top: 24px;
        color: rgb(33, 33, 33);
      }

      .double-line-1 {
        margin-top: 5px;
        margin-bottom: 6px;
      }

      .double-line-2 {
        font-size: 13px;
        line-height: 13px;
        color: rgba(0, 0, 0, 0.4);
      }

      .border-wrap{
        font-size: 64px;
        text-align: center;
        position: relative;
        width: 96px;
        height: 96px;
        border-radius: 50%;
        margin: auto;
        margin-top: 32px;
        margin-bottom: -20px;
        background: #FFFFFF;
      }

      .check{
        display: flex;
        position: absolute;
        right: 20px;
        bottom: 0;
        margin-bottom: -10px;
      }

      .center {
        @apply(--layout-horizontal);
        @apply(--layout-wrap);
        @apply(--layout-center-justified);
      }

      .colored{
        position:relative;
      }

      .done{

        background-color: var(--paper-light-green-500);

      }

      .running{

        background-color: var(--paper-light-blue-500);

      }

      .error{

        background-color: var(--paper-red-500);

      }

      .fab{

        margin: 4px;

      }

      paper-swatch-picker {

        margin: 0 10px;

      }

      #favorite[icon="icons:favorite"]{

        background-color: var(--accent-color);

      }

      #favorite[icon="icons:favorite-border"]{

        background-color: var(--disabled-text-color);

      }

    </style>

    <paper-card class="content">
      <div class="center colored" style$="[[_setBackgroundColor(feed.data.color)]]">
        <div class="border-wrap">
          [[feed.data.letter]]
        </div>
        
      </div>

      <div class="card-content">

        

        
        <div class="group">
          <div class="item">
            <div class="double-line-1">[[feed.data.name]]</div>
            <div class="double-line-2">Name</div>
          </div>
          
          <div class="item">
            <iron-icon icon="icons:assignment-ind"></iron-icon>
            <div class="double-line-1">[[feed.data.date]]</div>
            <div class="double-line-2">Last modified</div>
          </div>
        </div>

        
      

      
      <div class="group">
        <div class="item">
          <iron-icon icon$="[[_setFavoriteIcon(feed.data.favorite)]]"></iron-icon>
          <paper-toggle-button class="double-line-1" checked="{{feed.data.favorite}}"></paper-toggle-button>

          <div class="double-line-2">Favorite</div>
        </div>
      </div>

      

      
      <div class="group">
        <div class="item">
          <iron-icon icon="icons:label"></iron-icon>
          <div class="double-line-1">
            <template is="dom-repeat" items="[[feed.data.tags]]">
              <span class="tag" style$="{{_setTagStyle(item.color)}}">#<span>{{item.name}}</span></span>
            </template>

          </div>

            

          <div class="double-line-2">Labels ([[feed.data.tags.length]])</div>
        </div>
      </div>
    

  </div></paper-card></template>

  <script>!function(){"use strict";Polymer({is:"chris-feed-about",properties:{feed:{type:Object}},_setBackgroundColor:function(r){return"background-color: "+r+";"},_setColor:function(r){return"color: "+r+";"},_setStatusIcon:function(r){var o="icons:";return o+="running"===r?"schedule":"error"===r?"clear":"done"},_setFavoriteIcon:function(r){var o="icons:";return o+=r?"favorite":"favorite-border"},_setTagStyle:function(r){return"color: "+r+";"}})}();</script>
</dom-module><dom-module id="chris-feed-comments" assetpath="chris-feed-views/chris-feed-comments/">
  <template>
    <style>

    .toolbar {

        min-height: 48px;
        @apply(--layout-horizontal);
        @apply(--layout-end);
        @apply(--layout-wrap);
        border-bottom: 1px solid var(--accent-color);

      }

      .name {

        font-size: 16px;
        font-weight: bold;
        color: var(--primary-text-color);

      }

      .spacer {

        @apply(--layout-flex);

      }

      paper-icon-button {

        color: var(--secondary-text-color);

      }

      .content {

        background-color: var(--paper-grey-50);
        @apply(--layout-vertical);
        @apply(--layout-wrap);
        padding: 24px;
        max-width: 800px;
        margin: auto;
        margin-top: 24px;
        margin-bottom: 100px;

      }


    paper-card{

      color: var(--primary-text-color);
      --paper-card-header-color: var(--secondary-text-color);
      --paper-card-background-color: var(--paper-grey-100);
      background: var(--paper-grey-100);

    }

    </style>

    <chris-api id="API" content-type="application/json" ,="" response="{{response}}" on-response="handleItem" error="{{error}}" on-error="handleError">
    </chris-api>

    <paper-card class="content" heading="Discussion">

      <div class="card-content">

        <div id="commentList" class="comment-list">

          <div id="content" class="content">

            
            <template is="dom-repeat" items="[[comments.data]]">

              <chris-comment comment="[[item]]"></chris-comment>

            </template>

            

            <paper-input id="comment" label="Add a comment" on-keydown="save" char-counter="" maxlength="120">
              <paper-icon-button suffix="" icon="icons:clear" on-tap="clear"></paper-icon-button>
            </paper-input>

          </div>

        </div>

      </div>

    </paper-card>

  </template>

  <script>Polymer({is:"chris-feed-comments",properties:{comments:{type:Object,observer:"_commentsChanged"},valid:{type:Boolean}},clear:function(){this.$.comment.value=""},save:function(t){if(13===t.keyCode&&(t.stopPropagation(),t.preventDefault(),""!==this.$.comment.value)){var e={weekday:"long",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"},i={};i.data={author:"Nicolas Rannou",color:"blue",content:this.$.comment.value,index:this.comments.length+1,date:(new Date).toLocaleTimeString("en-us",e)},i.template=this.comments.template,i.href=this.comments.href,this.push("comments.data",i),this.clear(),this.$.API.request("POST",this.comments.href,{body:i})}},handleItem:function(t){if(t.preventDefault(),t.stopPropagation(),t.detail){var e=t.detail;e.error&&e.error.code&&(this.pop("comments.data"),this.fire("notification",e.error))}},handleError:function(){},isValid:function(t){if(this.comments){var e=[];return"object"!=typeof this.comments.template&&e.push("template:Object"),"string"!=typeof this.comments.href&&e.push("href:String"),this.comments.data&&this.comments.data.constructor===Array||e.push("data:Array"),this.valid=e.length<=0,this.fire("valid-changed"),this.valid||(console.log(e),this.fire("error",e)),this.valid}},_commentsChanged:function(t){!this.isValid(this.comments)}});</script>
</dom-module>
<dom-module id="chris-feed-note" assetpath="chris-feed-views/chris-feed-note/">
  <template>
    <style>

      host {

        display: block;

      }

      .toolbar {

        min-height: 48px;
        @apply(--layout-horizontal);
        @apply(--layout-end);
        @apply(--layout-wrap);

        padding: 16px;
        font-size: 24px;
        font-weight: 400;
        color: #737373;

      }

      .name {

        font-size: 16px;
        font-weight: bold;
        color: var(--primary-text-color);

      }

      .spacer {

        @apply(--layout-flex);

      }

      paper-icon-button {

        border-bottom: 1px solid var(--accent-color);
        color: var(--secondary-text-color);

      }

      .content {

        /*padding: 20px;*/

      }

      #editor {

        display: none;
        width: inherit;

      }

      /* Markdown style */

      .markdown-html pre code {

        display: flex;
        padding: 10px;
        color: #ffffff;
        background-color: var(--paper-grey-800);

      }

      .markdown-html code {

        padding: 10px;
        background-color: #ffffff;
        color: var(--accent-color);
        font-weight: bold;

      }

      .markdown-html blockquote p {

        background-color: #ffffff;
        padding: 8px;

      }

      .markdown-html table {

        border-collapse: collapse;

      }

      .markdown-html table, .markdown-html th, .markdown-html td {

        border: 1px solid black;

      }

      
      .content {

        background-color: var(--paper-grey-50);
        @apply(--layout-vertical);
        @apply(--layout-wrap);
        padding: 24px;
        max-width: 800px;
        margin: auto;
        margin-top: 24px;
        margin-bottom: 100px;

      }

      paper-card{

        color: var(--primary-text-color);
        --paper-card-header-color: var(--secondary-text-color);
        --paper-card-background-color: var(--paper-grey-100);
        background: var(--paper-grey-100);

      }

    </style>

    <chris-api id="API" content-type="application/json" ,="" on-response="handleItem" error="{{error}}" on-error="handleError">
    </chris-api>

    <paper-card class="content">

      <div class="toolbar">

        <div class="title" title="">Note</div>

        <div class="spacer"></div>

        <template is="dom-if" if="{{!editing}}">
          <paper-icon-button icon="icons:create" on-tap="edit"></paper-icon-button>
        </template>

        <template is="dom-if" if="{{editing}}">
          <paper-icon-button icon="icons:save" on-tap="save"></paper-icon-button>
          <paper-icon-button icon="icons:close" on-tap="close"></paper-icon-button>
        </template>

        <a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Here-Cheatsheet" target="_blank">
          <paper-icon-button icon="help-outline"></paper-icon-button>
        </a>

      </div>

      <div class="card-content">

        <div id="note" class="note">

          

          <div class="content">

            <iron-autogrow-textarea id="editor" value="{{notes.data.0.data.content}}" on-input="_updateContent"></iron-autogrow-textarea>

            <marked-element id="md" markdown="[[notes.data.0.data.content]]">
              <div class="markdown-html"></div>
            </marked-element>
          </div>

        </div>

      </div>

    </paper-card>

  </template>

  <script>Polymer({is:"chris-feed-note",properties:{notes:{type:Object,observer:"_notesChanged"},previousContent:{type:String},editing:{type:Boolean,value:!1},error:{type:Object},valid:{type:Boolean}},_stopEventPropagation:function(t){t.stopPropagation()},edit:function(t){t&&this._stopEventPropagation(t),this.editing=!0,this.previousContent=this.notes.data[0].data.content,this.$.editor.style.display="block"},close:function(t){this._stopEventPropagation(t),this.editing=!1,this.notes.data[0].data.content=this.previousContent,this.$.editor.value=this.previousContent,this.$.md.markdown=this.previousContent,this.$.editor.style.display="none"},save:function(t){t&&this._stopEventPropagation(t),this.editing=!1,this.$.editor.style.display="none";var e=this.notes.data[0];e.template=this.notes.template,e.href=this.notes.href;var i=[{name:"content",value:this.previousContent}];this.$.API.request("PUT",e.href,{body:e,cache:i})},handleItem:function(t){if(t.preventDefault(),t.stopPropagation(),t.detail){var e=t.detail;e.error&&e.error.code&&(this.notes.data[0].data.content=e.cache[0].value,this.fire("notes-changed"),this.$.editor.value=e.cache[0].value,this.$.md.markdown=e.cache[0].value,this.fire("notification",e.error))}},handleError:function(){console.log(this.error)},_updateContent:function(){this.$.md.markdown=this.$.editor.value},isValid:function(t){if(this.notes){var e=[];return"object"!=typeof this.notes.template&&e.push("template:Object"),"string"!=typeof this.notes.href&&e.push("href:String"),this.notes.data&&this.notes.data.constructor===Array||e.push("data:Array"),this.valid=e.length<=0,this.fire("valid-changed"),this.valid||(console.log(e),this.fire("error",e)),this.valid}},_notesChanged:function(t){!this.isValid(this.notes)}});</script>
</dom-module>
"


<dom-module id="chris-feed-plugin" assetpath="chris-feed-views/chris-feed-plugin/">

  <template>

    <style>

      .content {

        background-color: var(--paper-grey-50);
        padding: 24px;
        position: fixed;
        top: 64px;
        bottom: 0;
        left: 0;
        right: 0;
        display: flex;
        flex-flow: row wrap;
        overflow-y: auto;

      }

      .navigation {

        flex: 1;
        min-width: 100px;
        padding: 8px;
        display: flex;
        flex-direction: column;

      }

      .viewer, ami-viewer {

        flex: 2;
        height: 100%;
        min-width: 400px;
        overflow: hidden;
        background-color: var(--paper-grey-500);

      }

      .viewer-controls {
        flex: 1;
        min-width: 100px;
        padding: 8px;
      }

      paper-dropdown-menu, paper-slider{

        width:100%;

      }

      .paper-range-slider {

        display: flex;

      }

      paper-range-slider {

        --paper-range-slider-knob-color: var(--google-blue-700);
        --paper-range-slider-active-color: var(--google-blue-700);
        --paper-range-slider-pin-color: var(--google-blue-700);

      }

      .paper-range-slider paper-input{

        width: 50px;
        overflow: hidden;

      }

      .files {

        overflow-y: auto;

      }

      #start {

        z-index:10;
        position: fixed;
        bottom: 16px;
        right: 16px;
        --paper-fab-background: var(--accent-color);

      }

    </style>

    <ami-loader urls="{{urls}}" series="{{series}}"></ami-loader>

    <div class="content">

      <div class="navigation">

        <div class="header">

          <div> Current Plugin: {{plugin.data.id}} : {{plugin.data.plugin_name}} </div>
          
          <div> Parent ID: {{plugin.data.previous_id}} </div>

          <div> Children IDs </div>

          <ul>
            <template is="dom-repeat" items="{{plugin.data.children}}">
              <li> Children ID:{{item.data.id}} </li>
            </template>
          </ul>

        </div>

        <div>Files</div>

        <div class="files">

          <ul>
            <template is="dom-repeat" items="{{files}}" as="file">
              <li>{{file.data.fname}} </li>
            </template>
          <ul>

        </ul></ul></div>

      </div>

      <div class="viewer">
        <ami-viewer index="{{index}}" index-max="{{indexMax}}" orientation="{{orientation}}" series="[[series]]">
        </ami-viewer>
      </div>

      <div class="viewer-controls">

        <div>Some cool controls</div>
        
        <paper-dropdown-menu label="Orientation">
          <paper-listbox class="dropdown-content" selected="{{orientation}}">
            <paper-item>Acquisition</paper-item>
            <paper-item>Next</paper-item>
            <paper-item>Last</paper-item>
          </paper-listbox>
        </paper-dropdown-menu>

        <div> Index </div>
        <paper-slider id="slider" min="0" max="{{indexMax}}" value="{{index}}" immediate-value="{{index}}" editable=""></paper-slider>
        <div> Window / level (not connected) </div>
        
        <div class="paper-range-slider">
        <paper-input value="{{vmin}}"></paper-input><paper-range-slider value-min="{{vmin}}" value-max="{{vmax}}" style="width:100%"></paper-range-slider><paper-input value="{{vmax}}"></paper-input>
        </div>
      </div>

      <paper-fab id="start" icon="av:play-arrow" on-tap="_getPlugins"></paper-fab>

      

    </div>

  </template>

  <script>Polymer({is:"chris-feed-plugin",properties:{plugin:{type:Object,observer:"_pluginChanged"},files:{type:Array,observer:"_filesChanged"}},_pluginChanged:function(){console.log(this.plugin)},_filesChanged:function(){var t=[],r=["36444280","36444294","36444308","36444322","36444336"],a=r.map(function(t){return"https://cdn.rawgit.com/FNNDSC/data/master/dicom/adi_brain/"+t});t.push(a);var e=["https://cdn.rawgit.com/FNNDSC/data/master/nrrd/marc_avf/avf_float_32.nrrd"];t.push(e);var n=["https://cdn.rawgit.com/FNNDSC/data/master/nifti/siena/siena.nii.gz"];t.push(n),this.urls=t[Math.floor(Math.random()*t.length)]},_getPlugins:function(){this.fire("run-plugin")},_patchOverlay:function(t){t.target.withBackdrop&&t.target.parentNode.insertBefore(t.target.backdropElement,t.target)}});</script>
</dom-module>
<dom-module id="chris-parameter-boolean" assetpath="../../chris-components/chris-parameter-boolean/">

  <style>

    :host{

      padding: 8px 0;
      font-size: 16px;
      font-weight: 400;
      line-height: 24px;
      margin-top: 22px;
      
    }

  </style>

  <template>

    <paper-checkbox checked="{{value}}"></paper-checkbox> [[label]]

  </template>

  <script>Polymer({is:"chris-parameter-boolean",properties:{value:{type:String,observer:"_valueChanged"},label:{type:String}},_valueChanged:function(){this.fire("change-value",this.value)}});</script>
</dom-module>
&gt;
<dom-module id="chris-parameter-number" assetpath="../../chris-components/chris-parameter-number/">

  <template>

    <paper-input value="{{value}}" type="number" label="[[label]]" step="[[step]]"></paper-input>

  </template>

  <script>Polymer({is:"chris-parameter-number",properties:{value:{type:String,observer:"_valueChanged"},step:{type:String},label:{type:String}},_valueChanged:function(){this.fire("change-value",this.value)}});</script>
</dom-module>
<dom-module id="chris-parameter-string" assetpath="../../chris-components/chris-parameter-string/">

  <template>

    <paper-input value="{{value}}" label="[[label]]"></paper-input>

  </template>

  <script>Polymer({is:"chris-parameter-string",properties:{value:{type:String,observer:"_valueChanged"},label:{type:String}},_valueChanged:function(){this.fire("change-value",this.value)}});</script>
</dom-module>
<dom-module id="chris-parameter" assetpath="../../chris-components/chris-parameter/">

  <style>

    .parameter {

      display: flex;

    }

    chris-parameter-string, chris-parameter-number, chris-parameter-boolean {

      flex: 1

    }

  </style>

  <template>

    <div class="parameter">

      <template is="dom-if" if="{{_isString(type)}}">
        <chris-parameter-string value="[[default]]" label="{{name}}"></chris-parameter-string>
      </template>

      <template is="dom-if" if="{{_isBoolean(type)}}">
        <chris-parameter-boolean value="[[default]]" label="{{name}}"></chris-parameter-boolean>
      </template>

      <template is="dom-if" if="{{_isInteger(type)}}">
        <chris-parameter-number value="[[default]]" step="1" label="{{name}}"></chris-parameter-number>
      </template>

      <template is="dom-if" if="{{_isFloat(type)}}">
        <chris-parameter-number value="[[default]]" step="0.00000001" label="{{name}}"></chris-parameter-number>
      </template>

      <paper-icon-button id="help" icon="icons:help-outline" alt="help"></paper-icon-button>
      <paper-tooltip for="help" animation-delay="0.2">{{help}}</paper-tooltip>

    </div>


  </template>

  <script>Polymer({is:"chris-parameter",properties:{default:{type:String,observer:"_defaultChanged"},type:{type:String,observer:"_typeChanged"},help:{type:String,observer:"_helpChanged"},name:{type:String,value:"_nameChanged"}},_isString:function(e){return"string"===e},_isBoolean:function(e){return"boolean"===e},_isInteger:function(e){return"integer"===e},_isFloat:function(e){return"float"===e}});</script>
</dom-module>
<dom-module id="chris-feed-run" assetpath="chris-feed-views/chris-feed-run/">
  <template>
    <style>

      .content {

        background-color: var(--paper-grey-50);
        @apply --layout-vertical;
        @apply --layout-wrap;
        padding: 24px;
        max-width: 800px;
        margin: auto;
        margin-top: 24px;
        margin-bottom: 100px;

      }


    paper-card{

      color: var(--primary-text-color);
      --paper-card-header-color: var(--secondary-text-color);
      --paper-card-background-color: var(--paper-grey-100);
      background: var(--paper-grey-100);

    }

    .submit {

        padding: 16px;
        font-size: 18px;
        font-weight: 400;
        background-color: var(--accent-color);
        color: #ffffff;
        margin-top: 24px;

      }

    </style>

    
    <chris-api id="API" error="{{error}}">
    </chris-api>

    <paper-card class="content" heading="Run plugin">

      <div class="card-content">

        <paper-dropdown-menu id="dropdown" label="Plugin to run">

          <paper-listbox class="dropdown-content" selected="{{selectedMenu}}">

            <template is="dom-repeat" items="{{plugins}}">
              <paper-item plugin="[[item]]" on-tap="_pluginSelected">{{item.data.name}} </paper-item>
            </template>

          </paper-listbox>

        </paper-dropdown-menu>


        <div>Parameters</div>
        <template is="dom-repeat" items="{{parameters.data}}">
          
          <chris-parameter parameter="{{item}}" name="{{item.data.name}}" type="{{item.data.type}}" help="{{item.data.help}}" default="{{item.data.default}}" on-change-value="_changeValue"></chris-parameter>
        </template>

      </div>

      <paper-button class="submit" raised="" on-tap="_start">Start plugin</paper-button>

    </paper-card>

  </template>

  <script>Polymer({is:"chris-feed-run",properties:{plugin:{type:Object,observer:"_pluginChanged"},selectedPlugin:{type:Object,observer:"_selectedPluginChanged"},parameters:{type:Array,observer:"_parametersChanged"}},_pluginChanged:function(e){console.log(this.plugin)},_selectedPluginChanged:function(){null!==this.selectedPlugin&&this._fetchParameters()},_parametersChanged:function(){console.log(this.parameters)},_fetchParameters:function(){if(null!==this.selectedPlugin){var e={};e.auth={type:"token",token:sessionStorage.getItem("token")};var t=this.$.API.request("GET",this.selectedPlugin.links.parameters,e);t.then(this._handleParameters.bind(this))}},_handleParameters:function(e){this.set("parameters",e),this._resetParameters()},_resetParameters:function(){for(var e=0;e<this.parameters.data.length;e++)this.parameters.data[e].data.value=this.parameters.data[e].data.default},_pluginSelected:function(e){this.selectedPlugin=e.currentTarget.plugin},_changeValue:function(e){console.log(e),e.currentTarget.parameter.data.value=e.detail},_start:function(){var e={};e.auth={type:"token",token:sessionStorage.getItem("token")},e.body={},e.body.template={},e.body.template.data=[],e.body.template.data.push({name:"previous",value:""}),e.body.data={previous:this.plugin.data.id};for(var t=0;t<this.parameters.data.length;t++){var a=this.parameters.data[t].data.name,n=this.parameters.data[t].data.value,s={name:a,value:""};e.body.template.data.push(s),e.body.data[a]=n}var r=this.$.API.request("POST",this.selectedPlugin.links.instances,e);r.then(this.handleRunPluginDS.bind(this)).catch(this.handleRunError.bind(this))},handleRunPluginDS:function(e){this.fire("fetch-plugin",e.data[0]),this.set("selectedPlugin",null),this.set("parameters",[]),this.selectedMenu=null},handleRunError:function(e){console.log(e)}});</script>
</dom-module>
<dom-module id="chris-plugin-tree-recursive" assetpath="../../chris-components/chris-plugin-tree-recursive/">

  <template>

    <style>

      :host {

        display: flex;
        flex: 1;

        }

      .plugin, .label, .children {

        display: flex;

      }

      .plugin {

        flex-direction: column;
        flex: 1;

      }

      .children {

        flex-direction: row

      }

      .label {

        /*height: 50px;
        color: red;*/
        justify-content: center;

      }

      paper-button.primary {

        background-color: var(--primary-color);
        color: white;
        width:100%;
        margin:0;
        border-radius: 0;
        border: 1px solid #dddddd;

      }

      paper-button.primary[selected] {

        background-color: var(--accent-color);

      }

    </style>

    <template is="dom-repeat" items="{{tree}}">
      <div class="plugin">
        <div class="label" on-tap="_selectNode">
          <paper-button class="primary" selected$="{{item.data.selected}}">{{item.data.plugin_name}}</paper-button>
        </div>
        <div class="children">
          <chris-plugin-tree-recursive id="testC" tree="{{item.data.children}}"></chris-plugin-tree-recursive>
        </div>
      </div>
    </template>
  </template>

  <script>Polymer({is:"chris-plugin-tree-recursive",properties:{tree:{type:Array,observer:"_treeChanged"}},_selectNode:function(e){this.fire("select-node",e.model.__data__.item)},_treeChanged:function(){for(var e=0;e<this.tree.length;e++)this.set(["tree",e,"data","children"],this.tree[e].data.children)}});</script>

</dom-module><dom-module id="chris-plugin-tree" assetpath="../../chris-components/chris-plugin-tree/">

  <template>

    <style>

      :host {

        display: block;

        }

      .plugin, .label, .children {

        display: flex;

      }

      .plugin {

        flex-direction: column

      }

      .children {

        flex-direction: row

      }

      .label {

        height: 50px;
        color: red;
        justify-content: center;

      }

    </style>

    <chris-plugin-tree-recursive id="test" tree="{{tree}}" on-select-node="_selectNode"></chris-plugin-tree-recursive>

  </template>

  <script>Polymer({is:"chris-plugin-tree",properties:{list:{type:Array},tree:{type:Array,observer:"_treeChanged"},selected:{type:Object,observer:"_selectedChanged"}},observers:["_listChanged(list.splices)","_treeChanged(tree.splices)"],_listChanged:function(){this._build(this.list);var t=this.list;t.sort(this._sortByPathLength),this.selected=t[0]},_treeChanged:function(){},_build:function(t){t.sort(this._sortByPreviousId);for(var e=[],a={},i=0;i<t.length;i++){var s=t[i];if(s.data.children=[],a[s.data.id]=i,""===s.data.previous_id)s.data.path=["tree",0,"data"],e.push(s);else{var d=t[a[s.data.previous_id]].data.path;s.data.path=d.concat(["children",t[a[s.data.previous_id]].data.children.length,"data"]),t[a[s.data.previous_id]].data.children.push(s)}}this.set("tree",e),this.fire("tree-changed",this.tree)},_find:function(t){},_insert:function(t,e){},_flatten:function(){},_sortByPreviousId:function(t,e){return""===t.data.previous_id?-1:""===e.data.previous_id?1:parseInt(t.data.previous_id,10)>parseInt(e.data.previous_id,10)?1:parseInt(t.data.previous_id,10)<parseInt(e.data.previous_id,10)?-1:0},_sortByPathLength:function(t,e){return t.data.path.length<e.data.path.length?1:t.data.path.length>e.data.path.length?-1:0},_selectNode:function(t){t.preventDefault(),t.stopPropagation(),this.selected=t.detail},_selectedChanged:function(){var t=-1;this.selected&&this.selected.data&&this.selected.data.id&&(t=this.selected.data.id),this.list.map(function(e){e.data.selected=e.data.id===t,this.set(e.data.path.concat(["selected"]),e.data.selected)}.bind(this)),this.fire("select-node",this.selected)}});</script>
</dom-module>
</div><dom-module id="chris-feed">

  <template>

    <style include="iron-flex iron-flex-alignment">

      :host {

        display: block;

      }

      app-header {

        background-color: var(--dark-primary-color);
        color: #ffffff;

      }

      app-header paper-icon-button {

        --paper-icon-button-ink-color: #ffffff;

      }

      .content {

        flex: 1;
        display: flex;
        flex-direction: column;

      }

      app-header-layout {

        background-color: var(--paper-grey-100);
        /*min-height: 201vh;*/

      }

      app-header-layout app-toolbar {

        color: #ffffff;

      }

      paper-progress {

        width: 100%;
        --paper-progress-active-color: var(--accent-color);
        --paper-progress-height: 2px;

      }

      .loaded paper-progress {

        display: none;

      }

      a {

        color: #ffffff;

      }

      div[main-title] {

        text-align: center;
      
     }

      .dropdown-content{
        margin-top: 64px;
        background-color: rgba(255, 255, 255, .8);
      }

      @media (max-width: 896px) {

        /*iron-dropdown, .dropdown-content{

          max-width: 100%!important;
          width: 100%!important;

        }*/

      } 

    </style>

    
    <chris-api id="ChrisAPI" error="{{error}}">
    </chris-api>

    <div id="detail">

        
        <app-header-layout id="adl" has-scrolling-region="" style$="[[_setLayoutStyle(feed.data.color)]]" fullbleed="">

          <app-header id="header" fixed="" effects="waterfall" style$="[[_setToolbarStyle(feed.data.color)]]">
            <app-toolbar>
              <paper-icon-button icon="icons:arrow-back" on-tap="_exit"></paper-icon-button>

              <div main-title="">[[feed.data.name]]</div>

              <span>
                <paper-icon-button icon="icons:apps" on-tap="_openTree"></paper-icon-button>
                <iron-dropdown id="dropdown" horizontal-align="right" vertical-align="top" on-tap="_closeDropdown">
                    <div class="plugin dropdown-content" on-select-node="_selectPlugin">
                      <chris-plugin-tree list="[[pluginInstanceCollection]]" selected="[[plugin]]"></chris-plugin-tree>
                    </div>
                </iron-dropdown>
              </span>

              <iron-selector attr-for-selected="name" selected="{{page}}">
                <paper-icon-button name="note" icon="editor:mode-edit" on-tap="_deselectPlugin"></paper-icon-button>
                <paper-icon-button name="comments" icon="communication:forum" on-tap="_deselectPlugin"></paper-icon-button>
                <paper-icon-button name="about" icon="icons:assignment-ind" on-tap="_deselectPlugin"></paper-icon-button>
              </iron-selector>

              <paper-icon-button icon="icons:more-vert"></paper-icon-button>

            </app-toolbar>
          </app-header>

          <div id="content" class="main content">

          <iron-pages selected="[[page]]" attr-for-selected="name">

            <chris-feed-about name="about" feed="{{feed}}"></chris-feed-about>
            <chris-feed-note name="note" notes="{{note}}"></chris-feed-note>
            <chris-feed-comments name="comments" comments="{{comments}}"></chris-feed-comments>
            <chris-feed-plugin name="plugin" feed-index="[[feedRouteData.index]]" plugin="[[plugin]]" files="[[files]]" on-run-plugin="_runPlugin"></chris-feed-plugin>
            <chris-feed-run name="run" plugin="[[plugin]]" plugins="[[plugins]]" on-fetch-plugin="_fetchPlugin"></chris-feed-run>

          </iron-pages>

          </div>

        </app-header-layout>

    </div>

  </template>

  <script>Polymer({is:"chris-feed",properties:{feed:{type:Object,observer:"_feedChanged"},page:{type:String,value:"plugin",observer:"_pageChanged"},pluginInstanceCollection:{type:Array},plugins:{type:Array},plugin:{type:Object,observer:"_pluginChanged"},fileCollection:{type:Array},files:{type:Array},workflow:{type:Array},note:{type:Object},comments:{type:Object},details:{type:Object},error:{type:Object}},ready:function(e){},_feedIndexChanged:function(e){console.log("_feedIndexChanged "),console.log(e)},_pluginIndexChanged:function(e){console.log("_pluginIndexChanged"),console.log(e)},_pluginDSIdChanged:function(e){console.log("_pluginDSIdChanged"),console.log(e)},_feedChanged:function(){console.log(this.feed);var e={};e.auth={type:"token",token:sessionStorage.getItem("token")};var t=this.$.ChrisAPI.request("GET",this.feed.links.comments,e);t.then(this.handleComments.bind(this)).catch(this.handleError.bind(this));var n=this.$.ChrisAPI.request("GET",this.feed.links.note,e);n.then(this.handleNote.bind(this)).catch(this.handleError.bind(this)),e.params={},e.params.root_id=this.feed.data.id;var i=this.$.ChrisAPI.request("GET","/plugins/instances/search/",e);i.then(this._handlePlugins.bind(this)).catch(this.handleError.bind(this))},_reset:function(){},_handleFiles:function(e){this.set("files",e.data),console.log(this.files)},_handlePlugins:function(e){console.log(e),this.set("pluginInstanceCollection",e.data)},handleComments:function(e){if(console.log(e),this.$.adl.resetLayout(),e){var t=e.href.split(/[\/]+/).pop();switch(t){case"comments":this.set("comments",e);break;case"note":this.set("note",e);break;case"plugins":this.set("workflow",e)}}},handleNote:function(e){if(console.log(e),this.$.adl.resetLayout(),e){var t=e.href.split(/[\/]+/).pop();switch(t){case"comments":this.set("comments",e);break;case"note":this.set("note",e);break;case"plugins":this.set("workflow",e)}}},handleError:function(e){console.error(e)},_setLayoutStyle:function(e){e=e.replace("#","");var t=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),i=parseInt(e.substring(4,6),16);return"background-color: rgba("+t+","+n+","+i+", 0.5);"},_setToolbarStyle:function(e){return"background-color: "+e+";"},_exit:function(){this._reset(),this.fire("exit")},_openTree:function(){console.log(" open tree "),this.$.dropdown.open()},_pageChanged:function(){console.log(this.page)},_selectPlugin:function(e){e.detail.data?this.plugin=e.detail:this._deselectPlugin()},_deselectPlugin:function(){this.plugin=null},_pluginChanged:function(){if(this.page)if(null!==this.plugin){this.page="plugin";var e={};e.auth={type:"token",token:sessionStorage.getItem("token")},e.params={},e.params.plugin_instance=this.feed.data.id;var t=this.$.ChrisAPI.request("GET",this.feed.links.files,e);t.then(this._handleFiles.bind(this)).catch(this.handleError.bind(this))}else this.page="about"},_runPlugin:function(){this.plugin&&(this.page="run")},_closeDropdown:function(){this.$.dropdown.close()},_fetchPlugin:function(e){var t={};t.auth={type:"token",token:sessionStorage.getItem("token")},t.params={},t.params.fake_api_previous_id=this.plugin.data.id;var n=this.$.ChrisAPI.request("GET",e.detail.href,t);n.then(this._handlePlugin.bind(this)).catch(this.handleError.bind(this))},_handlePlugin:function(e){this.push("pluginInstanceCollection",e.data[0]),this.plugin=e.data[0]}});</script>
</dom-module>
</body></html>