<html><head><meta charset="UTF-8"><link rel="import" href="../../chris-ultron/chris-ultron.html"></head><body><dom-module id="chris-dataviews-rows">

  <template>

    <style include="iron-flex iron-flex-alignment">:host{display:flex;flex:1;}#rowsView{width:100%;overflow-x:scroll;border:1px solid var(--primary-text-color);}#rowsView paper-listbox{overflow-y:scroll;min-height:300px;max-height:300px;}iron-icon{margin-right:2px;}paper-item{--paper-item:{cursor:pointer;};}paper-item[type="folder"] iron-icon{--iron-icon-stroke-color:var(--primary-color);--iron-icon-fill-color:var(--paper-grey-100);}paper-item[type="folder"][up] iron-icon{--iron-icon-stroke-color:var(--paper-grey-500);--iron-icon-fill-color:var(--paper-grey-500);}paper-item[type="folder"][up]{color:var(--paper-grey-500);}paper-item[type="file"] iron-icon{--iron-icon-stroke-color:var(--accent-color);--iron-icon-fill-color:var(--paper-grey-100);}#rowsView paper-item{min-height:32px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:block;--paper-item-selected:{color:var(--primary-color);};}</style>

    <div id="rowsView">

      <paper-listbox depth="0" on-iron-select="_selectionChanged">

        
        <paper-item type="folder" up=""> <iron-icon icon="icons:arrow-back"></iron-icon></paper-item>

        
        <template is="dom-repeat" items="{{data.files}}" as="file">
          <paper-item type="folder"> <iron-icon icon="icons:folder"></iron-icon> [[file.label]]</paper-item>
        </template>

        
        <template is="dom-repeat" items="{{data.images}}" as="image">
          <paper-item type="file"> <iron-icon icon="editor:insert-drive-file"></iron-icon> [[image.label]]</paper-item>
        </template>

      </paper-listbox>

    </div>

  </template>

  <script>Polymer({is:"chris-dataviews-rows",behaviors:[Dataviews],_pathChanged:function(){console.log("rows path changed"),console.log(this.path)},_selectionChanged:function(e){console.log(this.data),console.log(this.path);var t=parseInt(e.target.attributes.depth.nodeValue,10),i=e.target.selectedItem.attributes.type.nodeValue;if("file"!==i){var l=Polymer.dom(this.$.rowsView).querySelector("paper-listbox");0===l.selected?this.pop("path"):this.push("path",l.selected-1),console.log("fire..."),this.fire("path-changed");for(var a=this.data.files,o=this.data.images,s="",r=0;r<this.path.length;r++)fileIndex=this.path[r],o=a[fileIndex].images,s=a[fileIndex].label,a=a[fileIndex].files;if(a||o){var h=document.createElement("paper-listbox");h.setAttribute("depth",t+1),this.listen(h,"iron-select","_selectionChanged");var d=this.createUpItem(s);if(Polymer.dom(h).appendChild(d),a)for(var r=0;r<a.length;r++){var n=this.createFolderItem(a[r].label);Polymer.dom(h).appendChild(n)}if(o)for(var r=0;r<o.length;r++){var p=this.createFileItem(o[r].label);Polymer.dom(h).appendChild(p)}Polymer.dom(this.$.rowsView).removeChild(l),Polymer.dom(this.$.rowsView).appendChild(h)}Polymer.dom.flush(),this.$.rowsView.scrollTop=0}}});</script>
</dom-module>
</body></html>