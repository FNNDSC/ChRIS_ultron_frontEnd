<html><head><meta charset="UTF-8"><link rel="import" href="../chris-ultron/chris-ultron.html"></head><body><div hidden="" by-vulcanize=""><dom-module id="paper-button" assetpath="../../bower_components/paper-button/">
  <template strip-whitespace="">
    <style include="paper-material">:host{@apply (--layout-inline);@apply (--layout-center-center);position:relative;box-sizing:border-box;min-width:5.14em;margin:0 0.29em;background:transparent;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);-webkit-tap-highlight-color:transparent;font:inherit;text-transform:uppercase;outline-width:0;border-radius:3px;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;user-select:none;cursor:pointer;z-index:0;padding:0.7em 0.57em;@apply (--paper-font-common-base);@apply (--paper-button);}:host([raised].keyboard-focus){font-weight:bold;@apply (--paper-button-raised-keyboard-focus);}:host(:not([raised]).keyboard-focus){font-weight:bold;@apply (--paper-button-flat-keyboard-focus);}:host([disabled]){background:#eaeaea;color:#a8a8a8;cursor:auto;pointer-events:none;@apply (--paper-button-disabled);}paper-ripple{color:var(--paper-button-ink-color);}</style>

    <content></content>
  </template>

  <script>Polymer({is:"paper-button",behaviors:[Polymer.PaperButtonBehavior],properties:{raised:{type:Boolean,reflectToAttribute:!0,value:!1,observer:"_calculateElevation"}},_calculateElevation:function(){this.raised?Polymer.PaperButtonBehaviorImpl._calculateElevation.apply(this):this._setElevation(0)}});</script>
</dom-module>
<script>Polymer.PaperSpinnerBehavior={listeners:{animationend:"__reset",webkitAnimationEnd:"__reset"},properties:{active:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"__activeChanged"},alt:{type:String,value:"loading",observer:"__altChanged"},__coolingDown:{type:Boolean,value:!1}},__computeContainerClasses:function(e,t){return[e||t?"active":"",t?"cooldown":""].join(" ")},__activeChanged:function(e,t){this.__setAriaHidden(!e),this.__coolingDown=!e&&t},__altChanged:function(e){e===this.getPropertyInfo("alt").value?this.alt=this.getAttribute("aria-label")||e:(this.__setAriaHidden(""===e),this.setAttribute("aria-label",e))},__setAriaHidden:function(e){var t="aria-hidden";e?this.setAttribute(t,"true"):this.removeAttribute(t)},__reset:function(){this.active=!1,this.__coolingDown=!1}};</script>
<dom-module id="paper-spinner-styles" assetpath="../../bower_components/paper-spinner/">
  <template>
    <style>:host{display:inline-block;position:relative;width:28px;height:28px;--paper-spinner-container-rotation-duration:1568ms;--paper-spinner-expand-contract-duration:1333ms;--paper-spinner-full-cycle-duration:5332ms;--paper-spinner-cooldown-duration:400ms;}#spinnerContainer{width:100%;height:100%;direction:ltr;}#spinnerContainer.active{-webkit-animation:container-rotate var(--paper-spinner-container-rotation-duration) linear infinite;animation:container-rotate var(--paper-spinner-container-rotation-duration) linear infinite;}@-webkit-keyframes container-rotate{to{-webkit-transform:rotate(360deg);}}@keyframes container-rotate{to{transform:rotate(360deg);}}.spinner-layer{position:absolute;width:100%;height:100%;opacity:0;white-space:nowrap;border-color:var(--paper-spinner-color, --google-blue-500);}.layer-1{border-color:var(--paper-spinner-layer-1-color, --google-blue-500);}.layer-2{border-color:var(--paper-spinner-layer-2-color, --google-red-500);}.layer-3{border-color:var(--paper-spinner-layer-3-color, --google-yellow-500);}.layer-4{border-color:var(--paper-spinner-layer-4-color, --google-green-500);}.active .spinner-layer{-webkit-animation-name:fill-unfill-rotate;-webkit-animation-duration:var(--paper-spinner-full-cycle-duration);-webkit-animation-timing-function:cubic-bezier(0.4, 0.0, 0.2, 1);-webkit-animation-iteration-count:infinite;animation-name:fill-unfill-rotate;animation-duration:var(--paper-spinner-full-cycle-duration);animation-timing-function:cubic-bezier(0.4, 0.0, 0.2, 1);animation-iteration-count:infinite;opacity:1;}.active .spinner-layer.layer-1{-webkit-animation-name:fill-unfill-rotate, layer-1-fade-in-out;animation-name:fill-unfill-rotate, layer-1-fade-in-out;}.active .spinner-layer.layer-2{-webkit-animation-name:fill-unfill-rotate, layer-2-fade-in-out;animation-name:fill-unfill-rotate, layer-2-fade-in-out;}.active .spinner-layer.layer-3{-webkit-animation-name:fill-unfill-rotate, layer-3-fade-in-out;animation-name:fill-unfill-rotate, layer-3-fade-in-out;}.active .spinner-layer.layer-4{-webkit-animation-name:fill-unfill-rotate, layer-4-fade-in-out;animation-name:fill-unfill-rotate, layer-4-fade-in-out;}@-webkit-keyframes fill-unfill-rotate{12.5%{-webkit-transform:rotate(135deg);}25%{-webkit-transform:rotate(270deg);}37.5%{-webkit-transform:rotate(405deg);}50%{-webkit-transform:rotate(540deg);}62.5%{-webkit-transform:rotate(675deg);}75%{-webkit-transform:rotate(810deg);}87.5%{-webkit-transform:rotate(945deg);}to{-webkit-transform:rotate(1080deg);}}@keyframes fill-unfill-rotate{12.5%{transform:rotate(135deg);}25%{transform:rotate(270deg);}37.5%{transform:rotate(405deg);}50%{transform:rotate(540deg);}62.5%{transform:rotate(675deg);}75%{transform:rotate(810deg);}87.5%{transform:rotate(945deg);}to{transform:rotate(1080deg);}}@-webkit-keyframes layer-1-fade-in-out{0%{opacity:1;}25%{opacity:1;}26%{opacity:0;}89%{opacity:0;}90%{opacity:1;}to{opacity:1;}}@keyframes layer-1-fade-in-out{0%{opacity:1;}25%{opacity:1;}26%{opacity:0;}89%{opacity:0;}90%{opacity:1;}to{opacity:1;}}@-webkit-keyframes layer-2-fade-in-out{0%{opacity:0;}15%{opacity:0;}25%{opacity:1;}50%{opacity:1;}51%{opacity:0;}to{opacity:0;}}@keyframes layer-2-fade-in-out{0%{opacity:0;}15%{opacity:0;}25%{opacity:1;}50%{opacity:1;}51%{opacity:0;}to{opacity:0;}}@-webkit-keyframes layer-3-fade-in-out{0%{opacity:0;}40%{opacity:0;}50%{opacity:1;}75%{opacity:1;}76%{opacity:0;}to{opacity:0;}}@keyframes layer-3-fade-in-out{0%{opacity:0;}40%{opacity:0;}50%{opacity:1;}75%{opacity:1;}76%{opacity:0;}to{opacity:0;}}@-webkit-keyframes layer-4-fade-in-out{0%{opacity:0;}65%{opacity:0;}75%{opacity:1;}90%{opacity:1;}to{opacity:0;}}@keyframes layer-4-fade-in-out{0%{opacity:0;}65%{opacity:0;}75%{opacity:1;}90%{opacity:1;}to{opacity:0;}}.circle-clipper{display:inline-block;position:relative;width:50%;height:100%;overflow:hidden;border-color:inherit;}.spinner-layer::after{left:45%;width:10%;border-top-style:solid;}.spinner-layer::after,
      .circle-clipper::after{content:'';box-sizing:border-box;position:absolute;top:0;border-width:var(--paper-spinner-stroke-width, 3px);border-color:inherit;border-radius:50%;}.circle-clipper::after{bottom:0;width:200%;border-style:solid;border-bottom-color:transparent !important;}.circle-clipper.left::after{left:0;border-right-color:transparent !important;-webkit-transform:rotate(129deg);transform:rotate(129deg);}.circle-clipper.right::after{left:-100%;border-left-color:transparent !important;-webkit-transform:rotate(-129deg);transform:rotate(-129deg);}.active .gap-patch::after,
      .active .circle-clipper::after{-webkit-animation-duration:var(--paper-spinner-expand-contract-duration);-webkit-animation-timing-function:cubic-bezier(0.4, 0.0, 0.2, 1);-webkit-animation-iteration-count:infinite;animation-duration:var(--paper-spinner-expand-contract-duration);animation-timing-function:cubic-bezier(0.4, 0.0, 0.2, 1);animation-iteration-count:infinite;}.active .circle-clipper.left::after{-webkit-animation-name:left-spin;animation-name:left-spin;}.active .circle-clipper.right::after{-webkit-animation-name:right-spin;animation-name:right-spin;}@-webkit-keyframes left-spin{0%{-webkit-transform:rotate(130deg);}50%{-webkit-transform:rotate(-5deg);}to{-webkit-transform:rotate(130deg);}}@keyframes left-spin{0%{transform:rotate(130deg);}50%{transform:rotate(-5deg);}to{transform:rotate(130deg);}}@-webkit-keyframes right-spin{0%{-webkit-transform:rotate(-130deg);}50%{-webkit-transform:rotate(5deg);}to{-webkit-transform:rotate(-130deg);}}@keyframes right-spin{0%{transform:rotate(-130deg);}50%{transform:rotate(5deg);}to{transform:rotate(-130deg);}}#spinnerContainer.cooldown{-webkit-animation:container-rotate var(--paper-spinner-container-rotation-duration) linear infinite, fade-out var(--paper-spinner-cooldown-duration) cubic-bezier(0.4, 0.0, 0.2, 1);animation:container-rotate var(--paper-spinner-container-rotation-duration) linear infinite, fade-out var(--paper-spinner-cooldown-duration) cubic-bezier(0.4, 0.0, 0.2, 1);}@-webkit-keyframes fade-out{0%{opacity:1;}to{opacity:0;}}@keyframes fade-out{0%{opacity:1;}to{opacity:0;}}</style>
  </template>
</dom-module>
<dom-module id="paper-spinner" assetpath="../../bower_components/paper-spinner/">
  <template strip-whitespace="">
    <style include="paper-spinner-styles"></style>

    <div id="spinnerContainer" class-name="[[__computeContainerClasses(active, __coolingDown)]]">
      <div class="spinner-layer layer-1">
        <div class="circle-clipper left"></div>
        <div class="circle-clipper right"></div>
      </div>

      <div class="spinner-layer layer-2">
        <div class="circle-clipper left"></div>
        <div class="circle-clipper right"></div>
      </div>

      <div class="spinner-layer layer-3">
        <div class="circle-clipper left"></div>
        <div class="circle-clipper right"></div>
      </div>

      <div class="spinner-layer layer-4">
        <div class="circle-clipper left"></div>
        <div class="circle-clipper right"></div>
      </div>
    </div>
  </template>

  <script>Polymer({is:"paper-spinner",behaviors:[Polymer.PaperSpinnerBehavior]});</script>
</dom-module>
<dom-module id="chris-footer" assetpath="../chris-footer/">

  <template>

    <style>.footer{color:#FFFFFF;}</style>

      <div class="footer">Â© FNNDSC 2016</div>

  </template>

  <script>Polymer({is:"chris-footer"});</script>
</dom-module>
</div><dom-module id="chris-login">

  <template>

    <style>:host{display:flex;position:absolute;top:0;right:0;left:0;bottom:0;background-color:var(--dark-primary-color);--paper-input-container-focus-color:var(--accent-color);}.spacer{flex:1;}.container{max-width:800px;margin:auto;margin-top:60px;margin-bottom:60px;position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;}.title{text-align:center;font-size:24px;color:var(--dark-primary-color);padding:10px;}paper-material{background-color:var(--paper-grey-50);padding:20px;opacity:1;}paper-button#login{margin-top:32px;background:var(--accent-color);color:white;@apply (--layout-vertical);@apply (--layout-center-center);display:flex;flex-direction:row;}.yellow-button{text-transform:none;color:#eeff41;}paper-spinner{margin:6px;--paper-spinner-layer-1-color:white;--paper-spinner-layer-2-color:white;--paper-spinner-layer-3-color:white;--paper-spinner-layer-4-color:white;}#loginSpinner{display:none;}a{color:var(--accent-color);}</style>

    <chris-api id="LoginAPI" api="Login" response="{{response}}" on-response="handleResponse" error="{{error}}" on-error="handleError">
    </chris-api>


    <div class="container">

      <paper-material elevation="5">
        <div class="horizontal-section">

          <section>

            <div class="title">
            Welcome to ChRIS Ultron
            </div>
          </section>

          <section> 
            <div>
              <paper-input id="username" type="username" value="{{_username}}" required="" error-message="Username is required" label="Username" onfocusout="validate()" on-keypress="keypressHandler">
              </paper-input>
              <paper-input id="password" type="password" value="{{_password}}" required="" error-message="Password is required" label="Password" onfocusout="validate()" on-keypress="keypressHandler">
              </paper-input>
            </div>
          </section>

          <section> 
            <paper-button id="login" on-click="login"><div id="loginLabel">Log In</div> <paper-spinner active="" id="loginSpinner"></paper-spinner></paper-button>

          </section>

          <section>
            <div>
              <br>
              New to <a href="https://github.com/FNNDSC">ChRIS</a>? <a href="https://github.com/FNNDSC">Register</a> for an account.
            </div>
          </section>

        </div>

      </paper-material>

      <div class="spacer"></div>

      <chris-footer><chris-footer>

    </chris-footer></chris-footer></div>

    <paper-toast id="loginError" text=""></paper-toast>

    <paper-toast id="serverError" duration="0" text="An error occured while connecting to the server. Please contact dev@babymri.org.">
      <paper-button on-tap="_closeToast" class="yellow-button">Close now!</paper-button>
    </paper-toast>

  </template>

  <script>Polymer({is:"chris-login",properties:{logged:{type:Boolean,notify:!0},_username:{type:String,value:""},_password:{type:String,value:""},response:{type:Object},error:{type:Object}},keypressHandler:function(s){13===s.charCode&&this.login()},login:function(){this.$.username.validate(),this.$.password.validate(),this.$.username.invalid||this.$.password.invalid||this.$.login.disabled||(this.$.login.disabled=!0,this.$.loginLabel.style.display="none",this.$.loginSpinner.style.display="block",this.$.LoginAPI.params={auth:"user="+this._username+",passwd="+this._password,username:this._username,password:this._password},this.$.LoginAPI.generateRequest())},handleResponse:function(){return this.$.login.disabled=!1,this.$.loginLabel.style.display="block",this.$.loginSpinner.style.display="none",this.response.status?(sessionStorage.setItem("username",this._username),sessionStorage.setItem("token",this.response.token),void(this.logged=!0)):(this.logged=!1,this.$.loginError.text=this.response.message,void this.$.loginError.show())},handleError:function(){this.$.login.disabled=!1,this.$.loginLabel.style.display="block",this.$.loginSpinner.style.display="none",this.$.serverError.open(),console.log(this.error)},_closeToast:function(){this.$.serverError.toggle()}});</script>
</dom-module>
</body></html>